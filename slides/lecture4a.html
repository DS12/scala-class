<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lecture 4a: Either, Validation and <a href="https://github.com/typelevel/cats"><em>Cats</em></a></title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Lecture 4a: Either, Validation and <a href="https://github.com/typelevel/cats"><em>Cats</em></a></h1></header>
            
            
            <section><p><img alt="" src="images/lecture4a/cats.png" /></p>
<!--Products and Coproducts -->

<!---
http://danielwestheide.com/blog/2012/12/19/the-neophytes-guide-to-scala-part-5-the-option-type.html
http://danielwestheide.com/blog/2012/12/26/the-neophytes-guide-to-scala-part-6-error-handling-with-try.html
--></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              1/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Either</h1></header>
            
            
            <section><p><code>Either</code> is a "chained container" that holds one of two things.</p>
<p>Like <code>Option</code>, the possible value inside this chained container can be accessed with <code>flatMap</code>.</p>
<p>Like a set of <code>Option</code>s, a set of <code>Eithers</code> can be chained together with a sequence of <code>flatMap</code>s.</p>
<p><code>Either</code> solves our problem from the previous lecture of <code>Option</code>'s uninformative <code>None</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              2/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>The <code>Option</code> trait had two concrete children: <code>Some</code> and <code>None</code>.  Think of <code>Some</code> as the "right" type and <code>None</code> as the "left" type.  <code>Option</code> has only one generic type.  <code>Either</code> has two generic types: left/incorrect and right/correct.</p>
<p><code>Either</code> is not just used for catching errors, just like <code>None</code> in <code>Option</code> is not always a "bad thing."</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              3/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">+E</span>,<span class="kt">+A</span><span class="o">]</span>
<span class="nc">case</span> <span class="k">class</span> <span class="nc">Left</span><span class="o">[</span><span class="kt">+E</span><span class="o">](</span><span class="n">e</span><span class="k">:</span> <span class="kt">E</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Right</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">A</span><span class="o">]</span>
</pre></div>

<p>A <code>Left</code> instance of <code>Either</code> will have <code>Nothing</code> for its "right" type.</p>
<p>A <code>Right</code> instance of <code>Either</code> will have <code>Nothing</code> for its "left" type.</p>
<p>The generic letter for the "left" type is "E" because it is usually a subtype of Java's <code>Exception</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              4/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>A few familiar combinators</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">EE</span> <span class="k">&gt;:</span> <span class="kt">E</span>, <span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">]</span>
</pre></div>

<p>Given an <code>Either[Exception, Integer]</code>, these combinators only let me operate on the <code>Integer</code>.  They are <em>right-biased</em>.</p>
<p>Usually, we intend to "fail fast" whenever an <code>Either</code> becomes <code>Left[Exception]</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              5/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Usage of <code>Either</code> will resemble this</h1></header>
            
            
            <section><p>Given a set of <code>Either</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherA</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="n">eitherB</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="n">eitherC</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">C</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>a function to produce a <code>D</code>:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">,</span> <span class="n">c</span><span class="k">:</span> <span class="kt">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">D</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>

<p>and a sequence of <code>flatMap</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherD</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">eitherA</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">a</span> <span class="k">=&gt;</span>
    <span class="n">eitherB</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">b</span> <span class="k">=&gt;</span>
      <span class="n">eitherC</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">c</span> <span class="k">=&gt;</span>
        <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              6/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Given:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherRecord1</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Record</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Right</span><span class="o">(</span><span class="n">record</span><span class="o">)</span>
<span class="k">val</span> <span class="n">eitherRecord2</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Record</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Left</span><span class="o">(</span><span class="nc">RetrievalException</span><span class="o">(</span><span class="s">&quot;retrieval of Record2 failed&quot;</span><span class="o">))</span>
<span class="k">val</span> <span class="n">record3</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Record</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Right</span><span class="o">(</span><span class="n">record3</span><span class="o">)</span>
</pre></div>

<p>a function to produce a <code>Collection</code>:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">makeCollection</span><span class="o">(</span><span class="n">r1</span><span class="k">:</span> <span class="kt">Record</span><span class="o">,</span> <span class="n">r2</span><span class="k">:</span> <span class="kt">Record</span><span class="o">,</span> <span class="n">r3</span><span class="k">:</span> <span class="kt">Record</span><span class="o">)</span><span class="k">:</span> <span class="kt">Collection</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>

<p>and a sequence of <code>flatMap</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherCollection</span> <span class="k">=</span> <span class="n">eitherRecord1</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">record1</span> <span class="k">=&gt;</span>
  <span class="n">eitherRecord2</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">record2</span> <span class="k">=&gt;</span>
    <span class="n">eitherRecord3</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">record3</span> <span class="k">=&gt;</span>
      <span class="n">makeCollection</span><span class="o">(</span><span class="n">record1</span><span class="o">,</span> <span class="n">record2</span><span class="o">,</span> <span class="n">record3</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">val</span> <span class="n">eitherCollection</span> <span class="k">=</span> 
  <span class="nc">Left</span><span class="o">(</span><span class="nc">RetrievalException</span><span class="o">(</span><span class="s">&quot;retrieval of Record2 failed&quot;</span><span class="o">))</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              7/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Did the prior two examples make full use of "chaining"?  Were the prior examples "sequential"?  No on all counts.  The input <code>Either</code>s were not dependent upon each other.</p>
<p>An example that makes better use of "chaining";
given types <code>A</code>, <code>B</code>, <code>C</code>, and <code>D</code>:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherA</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">eitherB</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">eitherC</span><span class="o">(</span><span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">C</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">eitherD</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>and a sequence of <code>flatMap</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherD</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">eitherA</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">eitherB</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="o">(</span><span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">eitherC</span><span class="o">(</span><span class="n">b</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">C</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="n">eitherD</span><span class="o">(</span><span class="n">c</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="c1">// three anonymous functions used here</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              8/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>The anonymous functions used in the "chain" on the previous slide are actually redundant.</p>
<p><code>=:=</code> is type eqivalency</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">eitherB</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">=:=</span> <span class="n">A</span> <span class="k">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">eitherC</span><span class="o">(</span><span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">C</span><span class="o">]</span> <span class="o">=:=</span> <span class="n">B</span> <span class="k">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">C</span><span class="o">]</span>
<span class="k">def</span> <span class="n">eitherD</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="o">=:=</span> <span class="n">C</span> <span class="k">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span>
</pre></div>

<p>We don't need to write anonymous functions when <code>eitherB</code>, <code>eitherC</code>, and <code>eitherD</code> already fit the signature of the argument expected by <code>flatMap</code>.</p>
<p>The "chain" of the previous slide, rewritten without this redundancy:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherD</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">eitherA</span>
    <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">eitherB</span><span class="o">)</span>
    <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">eitherC</span><span class="o">)</span>
    <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">eitherD</span><span class="o">)</span>
</pre></div>

<p>Redundancy is fine if it makes the code "self-documenting," though.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              9/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Sending a <code>Request</code> to a distant server; the <code>Response</code> may or may not arrive.  If the <code>Response</code> does arrive, its <code>Payload</code> may or may not be corrupted.</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span> <span class="o">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">sendRequest</span><span class="o">(</span><span class="n">req</span><span class="k">:</span> <span class="kt">Request</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Response</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">unpackResponse</span><span class="o">(</span><span class="n">res</span><span class="k">:</span> <span class="kt">Response</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Payload</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>and a sequence of <code>flatMap</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherPayload</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Payload</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">response</span> <span class="k">=&gt;</span>
    <span class="n">unpackResponse</span><span class="o">(</span><span class="n">response</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

<p>Rewritten to not be "hard-wired" to a particular value <code>request</code>:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">getPayload</span><span class="o">(</span><span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Payload</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">response</span> <span class="k">=&gt;</span>
    <span class="n">unpackResponse</span><span class="o">(</span><span class="n">response</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              10/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>The left side of <code>Either</code> is <em>typically</em> an <code>Exception</code> of some form, and is usually intended to be the "end of the chain."  To prioritize typical usage, combinators on most implementations of <code>Either</code> are "right-biased."</p>
<p>Nevertheless, sometimes we <em>do</em> want to operate on the "left" type.  Implementations of <code>Either</code> vary by library in how this is provided, if at all.</p>
<p>Scalaz' <code>Either</code> provides <code>leftMap</code>:</p>
<div class="highlight"><pre><span></span><span class="o">(</span><span class="n">A</span> <span class="o">\/</span> <span class="n">B</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">leftMap</span><span class="o">[</span><span class="kt">C</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">C</span> <span class="kt">\/</span> <span class="kt">B</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p>This is particularly useful when the "left" type is not a bad thing like an exception.</p>
<p><code>Either</code> can be used for more than containing exceptions.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              11/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p><code>def Try</code> from previous lecture, rewritten for <code>Either</code></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">tryEither</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Throwable</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">try</span> <span class="o">{</span> <span class="nc">Right</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">}</span>
  <span class="k">catch</span> <span class="o">{</span> <span class="k">case</span> <span class="n">t</span><span class="k">:</span> <span class="kt">Throwable</span> <span class="o">=&gt;</span> <span class="nc">Left</span><span class="o">(</span><span class="n">throwable</span><span class="o">)</span> <span class="o">}</span>
</pre></div>

<p>An improvement, taken from <code>Scalaz</code></p>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.util.control.NonFatal</span>

<span class="k">def</span> <span class="n">tryEither</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Throwable</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">try</span> <span class="o">{</span> <span class="nc">Right</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">}</span>
  <span class="k">catch</span> <span class="o">{</span> <span class="k">case</span> <span class="nc">NonFatal</span><span class="o">(</span><span class="n">throwable</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Left</span><span class="o">(</span><span class="n">throwable</span><span class="o">)</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              12/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Lower Type Bound Generics</h1></header>
            
            
            <section><p>(Lower Type Bounds)</p>
<p>Last lecture, we left unexplained the "the necessity of the lower type bound generic <code>B</code> in the <code>getOrElse</code> and <code>orElse</code> combinators."</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="n">getOrElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span>
  <span class="k">def</span> <span class="n">orElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">ob</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="o">.</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              13/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Here, in <code>Either</code>, we see the same pattern; lower type bound generic <code>EE</code>:</p>
<div class="highlight"><pre><span></span><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">+E</span>,<span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">EE</span> <span class="k">&gt;:</span> <span class="kt">E</span>, <span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">]</span>

  <span class="c1">// This combinator has two lower type bound generics:</span>

  <span class="k">def</span> <span class="n">orElse</span><span class="o">[</span><span class="kt">EE</span> <span class="k">&gt;:</span> <span class="kt">E</span>, <span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">b</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">EE</span>, <span class="kt">B</span><span class="o">]</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              14/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>First, the explanation for the lower type bound generic in <code>getOrElse</code> and <code>orElse</code> of <code>Option</code>.</p>
<p>An instance of <code>Some[A]</code> is an <code>Option[A]</code>.</p>
<p>The<sup>*</sup> instance of <code>None</code> is an <code>Option[Nothing]</code>.</p>
<div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Some</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">get</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">None</span> <span class="k">extends</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span>
</pre></div>

<p>* There is only a single instance of <code>None</code>, as it is an <code>object</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              15/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><a href="http://www.scala-lang.org/api/current/index.html#scala.Nothing"><code>Nothing</code></a> is "at the bottom of Scala's type hierarchy.  <code>Nothing</code> is a subtype of every other type."</p>
<p>So <code>Nothing &lt;: A</code>.</p>
<p>This explains why an <code>Option[Integer]</code> can be:</p>
<ul>
<li><code>Some[Integer]</code> (<code>=:= Option[Integer]</code>)</li>
<li><code>None</code> (<code>=:= Option[Nothing]</code>)</li>
</ul>
<p>Next stop, explanation of the necessity of this for <code>getOrElse</code> and <code>orElse</code>:</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              16/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Given</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">failed</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span> <span class="k">=</span> <span class="nc">None</span>
</pre></div>

<p>if not for the lower type bound generic <code>B &gt;: A</code>, <code>getOrElse</code> would be limited to this signature when called on <code>failed</code>:</p>
<div class="highlight"><pre><span></span><span class="n">getOrElse</span><span class="o">(</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Nothing</span><span class="o">)</span><span class="k">:</span> <span class="kt">Nothing</span>
</pre></div>

<p>Not very useful.</p>
<p>With <code>B &gt;: A</code>, <code>getOrElse</code> on <code>failed</code> becomes:</p>
<div class="highlight"><pre><span></span><span class="n">getOrElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">Nothing</span><span class="o">](</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span>
</pre></div>

<p>More useful.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              17/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>B &gt;: A</code> is a <a href="http://docs.scala-lang.org/tutorials/tour/lower-type-bounds.html"><em>lower type bound</em></a>;</p>
<p>Generic <code>B</code> can be a supertype of <code>A</code>, or an equal type to <code>A</code>.</p>
<p>It is likely you will use <a href="http://docs.scala-lang.org/tutorials/tour/upper-type-bounds.html"><em>upper type bounds</em></a> more frequently.  I think their use cases are less convoluted, as well.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              18/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>Option[Nothing] &lt;: Option[A]</code> and the <code>+</code> before the generic is called <a href="https://twitter.github.io/scala_school/type-basics.html#variance"><em>covariance</em></a>.</p>
<p>Lacking the <code>+</code> prefix to its generic type, <code>Option</code> would be <em>invariant</em> and <code>Option[Nothing] &lt;: Option[A]</code> would be <em>false</em>.  This is default.</p>
<p>If the generic inside <code>List</code> is covariant, then: </p>
<p>"If <code>X</code> is a subtype of <code>Y</code>, then <code>List[X]</code> is a subtype of <code>List[Y]</code>." -- <em>FP in Scala</em>, section 3.1</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              19/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>The same explanation of the necessity of the lower type bound generic, for <code>Either</code></p>
<p>An instance of <code>Left</code> still has a "right" type: <code>Nothing</code>.</p>
<p>An instance of <code>Right</code> still has a "left" type: <code>Nothing</code>.</p>
<div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Left</span><span class="o">[</span><span class="kt">+E</span><span class="o">](</span><span class="n">e</span><span class="k">:</span> <span class="kt">E</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Right</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">A</span><span class="o">]</span>
</pre></div>

<p>If not for the lower type bound generic <code>EE</code>, <code>flatMap</code> would be limited to this signature when called an a instance of <code>Left</code>:</p>
<div class="highlight"><pre><span></span><span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">B</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              20/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Why would you need to call <code>flatMap</code> on an instance of <code>Left</code>?</p>
<p>Because at run-time your <code>Either</code> may not be a <code>Right</code> as you expected; it may be a <code>Left</code>.</p>
<p>At run-time, an <code>Either</code> may be instantiated as a <code>Left</code> or <code>Right</code>.</p>
<p>But at compile-time, the combinators must type-check for either way this could go.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              21/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Given a set of <code>Either</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherA</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="n">eitherB</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="n">eitherC</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">C</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>a function to produce a <code>D</code>:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">,</span> <span class="n">c</span><span class="k">:</span> <span class="kt">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">D</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>

<p>and a sequence of <code>flatMap</code>s:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">eitherD</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">D</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">eitherA</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">a</span> <span class="k">=&gt;</span>
    <span class="n">eitherB</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">b</span> <span class="k">=&gt;</span>
      <span class="n">eitherC</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">c</span> <span class="k">=&gt;</span>
        <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>

<p>typechecking at compile-time needs to verify the types <em>"line up"</em> 
if <code>eitherA</code> is <code>Left</code> or <code>Right</code>, if <code>eitherB</code> is <code>Left</code> or <code>Right</code>, etc.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              22/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>You can find an implementation of <code>Either</code> in several places:</p>
<ul>
<li>In <em>FP in Scala</em>, <code>fpinscala.errorhandling.Either</code></li>
<li>In <em>Scalaz</em>, <code>scalaz.\/</code><ul>
<li>Also called "Disjunction"</li>
<li><code>scalaz/core/src/main/scala/scalaz/Either.scala</code></li>
<li><a href="https://oss.sonatype.org/service/local/repositories/releases/archive/org/scalaz/scalaz_2.11/7.2.1/scalaz_2.11-7.2.1-javadoc.jar/!/index.html#scalaz.$bslash$div$">ScalaDoc</a></li>
</ul>
</li>
<li>In <em>Cats</em>, <code>cats.data.Xor</code><ul>
<li><code>cats/core/src/main/scala/cats/data/Xor.scala</code></li>
<li><a href="http://typelevel.org/cats/api/#cats.data.Xor">ScalaDoc</a></li>
</ul>
</li>
<li>Natively, <code>scala.util.Either</code><ul>
<li><a href="http://www.scala-lang.org/api/current/#scala.util.Either">ScalaDoc</a></li>
<li>Must use projection (<code>.left</code> or <code>.right</code>) to access <code>flatMap</code>, <code>map</code>, etc.; not right-biased; see ScalaDoc example</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              23/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>In an earlier Challenge Question for <code>Option</code>, we asked you to implement <code>flatMap</code> on <code>Option</code> using <code>map</code>, <code>orElse</code> and <code>getOrElse</code>.</p>
<p><code>orElse</code> and <code>getOrElse</code> are not "generalized" combinators -- they may not appear in all of the Containers equivalent to <code>Option</code>.  </p>
<p><code>unit</code> and <code>flatMap</code> <em>are</em> generalized combinators.  Implement these from scratch (using pattern matching for <code>flatMap</code>) for <code>Either</code>.</p>
<div class="highlight"><pre><span></span><span class="k">object</span> <span class="nc">Either</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">unit</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
    <span class="c1">// If we pass an eager `A` to `unit`, </span>
    <span class="c1">// the left generic is completely unnecesary -- hence `Nothing`.</span>
    <span class="c1">// Note, `unit` is not intended to be used to catch errors.</span>
    <span class="c1">// If it were, we&#39;d need a type other than `Nothing`.</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              24/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>In lab, you will implement <code>map</code>, <code>orElse</code>, and <code>getOrElse</code> using <code>unit</code> and <code>flatMap</code>, our primitives.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              25/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Validation</h1></header>
            
            
            <section><p>What if we don't want to "fail fast"?  What if we don't need (or want) sequentiality?  Then we should not be using a "chained container" like <code>Option</code> or <code>Either</code>.</p>
<p>"Failing fast" and "sequential chaining" was a signature feature of the chained containers we've seen previously:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">sendRequest</span><span class="o">(</span><span class="n">req</span><span class="k">:</span> <span class="kt">Request</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Response</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">def</span> <span class="n">unpackResponse</span><span class="o">(</span><span class="n">res</span><span class="k">:</span> <span class="kt">Response</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Payload</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="n">getPayload</span><span class="o">(</span><span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">Exception</span>, <span class="kt">Payload</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">response</span> <span class="k">=&gt;</span>
    <span class="n">unpackResponse</span><span class="o">(</span><span class="n">response</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>

<p>We'll have to depart from "chained container."</p>
<p>We'll refer to this new "container" as a <em>"ringed container"</em>.</p>
<p>I chose the word "ring" because "ringed container" is to <a href="https://en.wikipedia.org/wiki/Token_ring">token ring network</a> as "chained container" is to "Ethernet".</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              26/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Features you lose with "Ringed Container"</p>
<ul>
<li>Failing fast<ul>
<li>If I do not receive a <code>Response</code>, I will not attempt to extract the <code>Payload</code> of the <code>Response</code></li>
</ul>
</li>
<li>The contents of one container as the argument to the next container<ul>
<li>We are abandoning sequentiality.  With "chained container", each container had to wait on the container prior</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              27/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Features you gain with "Ringed Container"</p>
<ul>
<li>Parallelism, rather than sequentiality</li>
<li>In <code>Validation</code>, the ability to collect more than a single <code>Exception</code><ul>
<li>Perfect for parallelized parsing tasks</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              28/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>map2</h1></header>
            
            
            <section><p>Remember <code>map2</code>, a combinator of <code>Option</code>?  </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map2</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span>
</pre></div>

<p>It is critically important to any "ringed container."  If you associate <code>flatMap</code> with "chained containers," associate <code>map2</code> with "ringed containers."</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              29/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We are going to "hone in" on this feature of <code>Validation</code>, mentioned earlier:</p>
<ul>
<li>the ability to collect more than a single <code>Exception</code></li>
</ul>
<p>Where is this useful?</p>
<ul>
<li>a group of things that are mutually dependent, but not sequential</li>
<li>a set of web form fields that need to be validated<ul>
<li>Each field must be a <code>Right</code> for the entire form to be a <code>Right</code></li>
<li>But fields are validated independently</li>
<li>We want independence in validating these fields, so that all errors can be caught at the same time</li>
<li>What if you make multiple mistakes in a web form, and the page only informs you of one mistake per attempt to submit?</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              30/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Validation</span><span class="o">[</span><span class="kt">+E</span>, <span class="kt">+A</span><span class="o">]</span>

<span class="nc">case</span> <span class="k">class</span> <span class="nc">Failure</span><span class="o">[</span><span class="kt">E</span><span class="o">](</span><span class="n">head</span><span class="k">:</span> <span class="kt">E</span><span class="o">,</span> <span class="n">tail</span><span class="k">:</span> <span class="kt">Vector</span><span class="o">[</span><span class="kt">E</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">())</span>
  <span class="k">extends</span> <span class="nc">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">]</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Success</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Validation</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">A</span><span class="o">]</span>
</pre></div>

<p>A <code>Failure</code> instance of <code>Validation</code> will have <code>Nothing</code> for its "right" type.</p>
<p>A <code>Failure</code> instance of <code>Validation</code> will contain at least one instance of <code>E</code>.  Its member <code>tail</code> may be empty.</p>
<p>In Scalaz, <code>Failure</code> contains a <code>NonEmptyList[E]</code> rather than <code>head: E</code> and <code>tail: Vector[E]</code></p>
<p>A <code>Success</code> instance of <code>Validation</code> will have <code>Nothing</code> for its "left" type.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              31/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Write a function that combines two <code>Failure</code>s.  This is a component of other <code>Validation</code> combinators you will implement in lab.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">combineFailures</span><span class="o">[</span><span class="kt">E</span><span class="o">](</span><span class="n">f1</span><span class="k">:</span> <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">],</span>
                   <span class="n">f2</span><span class="k">:</span> <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">)</span><span class="k">:</span>
                  <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              32/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">combineFailures</span><span class="o">[</span><span class="kt">E</span><span class="o">](</span><span class="n">f1</span><span class="k">:</span> <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">],</span>
                   <span class="n">f2</span><span class="k">:</span> <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">)</span><span class="k">:</span>
                  <span class="kt">Validation</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">Nothing</span><span class="o">]</span> <span class="k">=</span> <span class="o">(</span><span class="n">f1</span><span class="o">,</span> <span class="n">f2</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="nc">Failure</span><span class="o">(</span><span class="n">h1</span><span class="o">,</span> <span class="n">t1</span><span class="o">),</span> <span class="nc">Failure</span><span class="o">(</span><span class="n">h2</span><span class="o">,</span> <span class="n">t2</span><span class="o">))</span> <span class="k">=&gt;</span>
    <span class="nc">Failure</span><span class="o">(</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">::</span><span class="n">t1</span><span class="o">:::</span><span class="n">t2</span><span class="o">)</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              33/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>You can find an implementation of <code>Validation</code> in several places:</p>
<ul>
<li>In <em>FP in Scala</em>, <code>fpinscala.applicative.Validation</code></li>
<li>In <em>Cats</em>, <code>cats.data.Validated</code><ul>
<li><code>cats/core/src/main/scala/cats/data/Validated.scala</code></li>
<li><a href="http://typelevel.org/cats/api/#cats.data.Validated">ScalaDoc</a></li>
</ul>
</li>
<li>Nowhere in the Scala standard library that I know of</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              34/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>If "chained container" has <code>map2</code>, why do we need <code>ringed container</code>?</p>
<p>Every "chained container" is also a "ringed container."</p>
<p>Earlier we mentioned that choosing the most restricted data type that meets the requirements is good programming practice.</p>
<p>The same applies to choosing "ringed container" over "chained container."</p>
<p>"Ringed container" is more restricted, and therefore more analyzable.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              35/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><a href="http://stackoverflow.com/a/7863380/1007926">What are the benefits of applicative parsing over monadic parsing?</a></p>
<p>"
The main difference between monadic and applicative parsing is in how sequential composition is handled. </p>
<p>You might think that having some extra flexibility can't hurt, but in reality it can. It prevents us from doing useful static analysis on a parser without running it. "</p>
<p>"Ringed container" is a more restricted, and therefore more analyzable, type of container than "chained container."</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              36/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tuple</h1></header>
            
            
            <section><p>Tuple is a simple product type that groups together simple logical collections of items without using a class.</p>
<pre><code>scala&gt; val hostPort = ("localhost", 80)
hostPort: (String, Int) = (localhost, 80)
scala&gt; hostPort._1
res0: String = localhost
scala&gt; hostPort._2
res1: Int = 80
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              37/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We are concluding our discussion of <code>Option</code>, <code>Either</code> and <code>Validation</code> with <code>Tuple</code> to expose the categorical relationship between the first 3 types and <code>Tuple</code>.</p>
<p><code>Tuple</code> is a <em>Product</em> in category theory.</p>
<p><code>Option</code>, <code>Either</code> and <code>Validation</code> are each a <em>Coproduct</em> in category theory.</p>
<p><code>Tuple</code> is a simpler type to understand than <code>Option</code>, <code>Either</code> or <code>Validation</code>.</p>
<p><code>Either</code> and <code>Validation</code> are each a dual to <code>Tuple2</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              38/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Tuple is implemented as a case class, is not iterable, and is indexed starting from 1.</p>
<div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Tuple2</span><span class="o">[</span><span class="kt">+T1</span>, <span class="kt">+T2</span><span class="o">](</span><span class="n">_1</span><span class="k">:</span> <span class="kt">T1</span><span class="o">,</span> <span class="n">_2</span><span class="k">:</span> <span class="kt">T2</span><span class="o">)</span>
  <span class="k">extends</span> <span class="nc">Product2</span><span class="o">[</span><span class="kt">T1</span>, <span class="kt">T2</span><span class="o">]</span>
  <span class="k">with</span> <span class="nc">Product</span>
  <span class="k">with</span> <span class="nc">Serializable</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              39/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Tuples fit with pattern matching nicely.</p>
<div class="highlight"><pre><span></span><span class="n">hostPort</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="s">&quot;localhost&quot;</span><span class="o">,</span> <span class="n">port</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">...</span>
  <span class="k">case</span> <span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              40/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Tuple has some special sauce for simply making Tuples of 2 values</p>
<pre><code>scala&gt; 1 -&gt; 2
res0: (Int, Int) = (1,2)
scala&gt; 1.-&gt;(2)
res0: (Int, Int) = (1,2)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              41/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tuples and Maps</h1></header>
            
            
            <section><p>Maps can be thought of as sets of tuples</p>
<pre><code>scala&gt; val a = 'a' -&gt; 97
a: (Char, Int) = (a,97)
scala&gt; Map(a)
res0: scala.collection.immutable.Map[Char,Int] = Map(a -&gt; 97)
scala&gt; Map(a,a)
res0: scala.collection.immutable.Map[Char,Int] = Map(a -&gt; 97)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              42/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>So the functions you write work on a pair of the keys and values in the Map.</p>
<pre><code>scala&gt; val ext= Map("steve" -&gt; 100, "bob" -&gt; 101, "joe" -&gt; 201)
ext: Map[String,Int] = Map((steve,100), (bob,101), (joe,201))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              43/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; ext.filter((namePhone: (String, Int)) =&gt; namePhone._2 &lt; 200)
res0: Map[String,Int] = Map((steve,100), (bob,101))
</code></pre>
<p class="notes">Because it gives you a tuple, you have to pull out the keys and values with their positional accessors. Yuck! Lucky us, we can actually use a pattern match to extract the key and value nicely.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              44/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; ext.filter({case (name, extension) =&gt; extension &lt; 200})
res0: Map[String,Int] = Map((steve,100), (bob,101))
</code></pre>
<p>.notes: Why does this work? Why can you pass in a partial pattern match?
Because PartialFunction[A,B] is a subtype of A=&gt;B</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4a.md">lecture4a.md</a>
            </aside>
            
            <aside class="page_number">
              45/45
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /45
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Lecture 4a: Either, Validation and <a href="https://github.com/typelevel/cats"><em>Cats</em></a></a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Either</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">-</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">-</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">A few familiar combinators</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Usage of <code>Either</code> will resemble this</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">-</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">-</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">-</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">-</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">-</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Lower Type Bound Generics</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">-</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">-</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">-</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">-</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">-</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">-</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">-</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">-</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">-</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">-</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">-</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">-</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Validation</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">-</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">-</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">map2</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">-</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">-</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">Challenge Question</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">-</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">-</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">-</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">Tuple</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">-</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">-</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">-</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">-</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Tuples and Maps</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">-</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">-</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">-</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Expos</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>