<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lecture 8: Property-based Testing</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Lecture 8: Property-based Testing</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              1/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Chapter 8 revolves around <em>Generators</em> and <em>Properties</em>.</p>
<p><br /></p>
<p>A <em>Generator</em> provides pseudo-random test cases.  A Generator is entirely deterministic - tests are reproducible.  It is based upon <code>Rand</code> from Chapter 6.</p>
<p>A <em>Property</em> is something that should hold true for an unknown number of test cases.</p>
<p><br /></p>
<p>The tools of Chapter 8 are available in the <a href="https://www.scalacheck.org/">ScalaCheck library</a>.  ScalaCheck and Chapter 8 both provide <a href="https://en.wikipedia.org/wiki/QuickCheck">property-based testing</a>.</p>
<p>We have simplified the book's implementation.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              2/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Gen</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Gen</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">rand</span><span class="k">:</span> <span class="kt">RNG</span> <span class="o">=&gt;</span> <span class="o">(</span><span class="n">A</span><span class="o">,</span> <span class="nc">RNG</span><span class="o">))</span>

<span class="c1">// [Int.MinValue, Int.MaxValue]</span>
<span class="k">val</span> <span class="n">genUniformInt</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="c1">// [0, Int.MaxValue]</span>
<span class="k">val</span> <span class="n">genUniformIntNonNegative</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">genUniformInt</span><span class="o">.</span><span class="n">map</span><span class="o">(</span> <span class="n">i</span> <span class="k">=&gt;</span> <span class="n">i</span><span class="o">.</span><span class="n">abs</span> <span class="o">)</span>

<span class="c1">// true or false</span>
<span class="k">val</span> <span class="n">genBoolean</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">genUniformInt</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">i</span> <span class="k">=&gt;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              3/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">forAll</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">genA</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">p</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Prop</span> 
  <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>Proposition will hold true for every value <code>A</code> generated by <code>Gen[A]</code>.</p>
<p>Otherwise, proposition will be falsified.</p>
<p>The number of tests to prove or falsify the proposition, and <code>Gen[A]</code>'s seed <code>RNG</code>, are not yet provided.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              4/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Prop</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">//         number of tests, seed =&gt; Result</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Prop</span><span class="o">(</span><span class="n">run</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">RNG</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Result</span><span class="o">)</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Gen</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">rand</span><span class="k">:</span> <span class="kt">RNG</span> <span class="o">=&gt;</span> <span class="o">(</span><span class="n">A</span><span class="o">,</span> <span class="nc">RNG</span><span class="o">))</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              5/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>In our implementation, when a <em>Property</em> is tested for a fixed number of test cases, </p>
<p>it produces an <code>Xor[NonEmptyList[String], List[String]]</code>.</p>
<p><br /></p>
<p>This <code>Xor</code> will be </p>
<div class="highlight"><pre><span></span><span class="nc">Left</span><span class="o">(...)</span><span class="k">:</span>  <span class="kt">Xor</span><span class="o">[</span><span class="kt">NonEmptyList</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>, <span class="kt">Nothing</span><span class="o">]</span>
<span class="c1">// test failed</span>
</pre></div>

<p>or</p>
<div class="highlight"><pre><span></span><span class="nc">Right</span><span class="o">(...)</span><span class="k">:</span> <span class="kt">Xor</span><span class="o">[</span><span class="kt">Nothing</span>, <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]]</span>
<span class="c1">// test passed</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              6/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Testing our Beta Distribution Sampler</h1></header>
            
            
            <section><p>In lab 6 we sampled from a Beta distribution.  </p>
<p>Before, we set <em>alpha</em> = 2 and <em>beta</em> = 2.  Our PDF was the purple line.</p>
<p><img alt="" src="images/lecture8/Beta_distribution_pdf.svg" /></p>
<p><a href="https://en.wikipedia.org/wiki/Beta_distribution">Picture source</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              7/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We will generate Beta distributions with various $\alpha and \$beta, </p>
<p>then compare the theoretical mean with the sample mean for each.</p>
<p><img alt="" src="images/lecture8/beta_mean.png" /></p>
<p>If the difference between the theoretical mean and the sample mean exceeds a fixed threshold, the test will fail.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              8/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Beta sampler</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">BetaDistributionSampling</span><span class="o">(</span>
  <span class="n">c</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">alpha</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">beta</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="o">{</span>

  <span class="c1">// Beta PDF</span>
  <span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span>
    <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">alpha</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> 
      <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">x</span><span class="o">),</span> <span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>

  <span class="k">val</span> <span class="n">sample</span><span class="k">:</span> <span class="kt">Rand</span><span class="o">[(</span><span class="kt">Double</span>, <span class="kt">Double</span><span class="o">)]</span> <span class="k">=</span>
    <span class="n">both</span><span class="o">(</span><span class="n">uniformDoublePositive</span><span class="o">,</span> 
         <span class="n">uniformDoublePositiveUpTo</span><span class="o">(</span><span class="n">c</span><span class="o">))</span>

  <span class="o">...</span>
</pre></div>

<p><code>slideCode.lecture6.BetaDistributionSampling</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              9/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Beta sampler</h1></header>
            
            
            <section><div class="highlight"><pre><span></span>  <span class="o">...</span>
  <span class="k">def</span> <span class="n">accepted</span><span class="o">(</span><span class="n">tup</span><span class="k">:</span> <span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>, <span class="kt">Double</span><span class="o">])</span><span class="k">:</span> 
      <span class="kt">Boolean</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="n">tup</span><span class="o">.</span><span class="n">_1</span>
    <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="n">tup</span><span class="o">.</span><span class="n">_2</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="kc">true</span>
    <span class="k">else</span> <span class="kc">false</span>
  <span class="o">}</span>
  <span class="k">val</span> <span class="n">acceptedSamples</span><span class="k">:</span> 
    <span class="kt">Rand</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>, <span class="kt">Double</span><span class="o">]]</span> <span class="k">=</span>
    <span class="n">rejectionSampler</span><span class="o">(</span><span class="n">sample</span><span class="o">)(</span><span class="n">accepted</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">acceptedX</span><span class="k">:</span> <span class="kt">Rand</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">map</span><span class="o">(</span><span class="n">acceptedSamples</span><span class="o">)(</span><span class="n">tup</span> <span class="k">=&gt;</span> <span class="n">tup</span><span class="o">.</span><span class="n">_1</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p><code>slideCode.lecture6.BetaDistributionSampling</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              10/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Generating Beta distributions</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genBetaDistribution</span><span class="k">:</span> 
  <span class="kt">Gen</span><span class="o">[</span><span class="kt">BetaDistributionSampling</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">genUniformDoublePositiveUpTo</span><span class="o">(</span><span class="mf">5.0</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> 
    <span class="n">alpha</span> <span class="k">=&gt;</span>
    <span class="n">genUniformDoublePositiveUpTo</span><span class="o">(</span><span class="mf">5.0</span><span class="o">).</span><span class="n">map</span> <span class="o">{</span> 
      <span class="n">beta</span> <span class="k">=&gt;</span>
      <span class="c1">// println(s&quot;alpha: $alpha  beta: $beta&quot;)</span>

      <span class="nc">BetaDistributionSampling</span><span class="o">(</span><span class="mf">5.0</span><span class="o">,</span> <span class="n">alpha</span><span class="o">,</span> <span class="n">beta</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p><code>slidecode.lecture8.TestingBetaDistributions</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              11/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Pulling values out of the Generator</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">BetaDistributionSampling</span><span class="o">(</span>
  <span class="n">c</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">alpha</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">beta</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</pre></div>

<p>Pulling 16 values out of <code>genBetaDistribution: Gen[BetaDistributionSampling]</code></p>
<pre><code>BetaDistributionSampling(5.0,1.59,3.91)
BetaDistributionSampling(5.0,0.61,3.79)
BetaDistributionSampling(5.0,4.47,4.12)
BetaDistributionSampling(5.0,3.26,4.62)
BetaDistributionSampling(5.0,0.29,1.77)
BetaDistributionSampling(5.0,1.57,3.94)
...
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              12/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>From each Beta distribution, we want 512 samples.  We need to pass along the alpha and beta, as well.</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genBetaDistributionSamples</span><span class="k">:</span>
           <span class="c1">// alpha   beta    samples</span>
  <span class="nc">Gen</span><span class="o">[</span><span class="kt">Tuple3</span><span class="o">[</span><span class="kt">Double</span>, <span class="kt">Double</span>, <span class="kt">List</span><span class="o">[</span><span class="kt">Double</span><span class="o">]]]</span> <span class="k">=</span>
  <span class="n">genBetaDistribution</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> 
    <span class="n">betaDistributionSampler</span> <span class="k">=&gt;</span> <span class="o">...</span> 
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              13/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>From each alpha, beta, and list of samples, we want a theoretical mean and a sample mean.</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genBetaDistributionMean</span><span class="k">:</span> 
    <span class="c1">//  theoretical mean,  sample mean</span>
  <span class="nc">Gen</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>, <span class="kt">Double</span><span class="o">]]</span> <span class="k">=</span>
  <span class="n">genBetaDistributionSamples</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              14/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Producing the Property</h1></header>
            
            
            <section><p>We will use <code>forAll</code> to produce a <code>Prop</code>.</p>
<p>Signature of the <code>forAll</code> method:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">forAll</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">genA</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">p</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Prop</span>
</pre></div>

<p>Signature of the <code>forAll</code> method in this usage:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">forAll</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>,<span class="kt">Double</span><span class="o">]]</span>
  <span class="o">(</span><span class="n">genA</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>,<span class="kt">Double</span><span class="o">]]</span><span class="err">]</span><span class="o">)</span>
  <span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>,<span class="kt">Double</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Prop</span>
</pre></div>

<p>We need to implement the predicate.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              15/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Predicate for testing Beta distributions</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">diffLimit</span> <span class="k">=</span> <span class="mf">0.5</span>

<span class="k">def</span> <span class="n">betaDistributionPredicate</span><span class="o">(</span>
  <span class="n">tup</span><span class="k">:</span> <span class="kt">Tuple2</span><span class="o">[</span><span class="kt">Double</span>, <span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">theoreticalMean</span> <span class="k">=</span> <span class="n">tup</span><span class="o">.</span><span class="n">_1</span>
  <span class="k">val</span> <span class="n">actualMean</span> <span class="k">=</span> <span class="n">tup</span><span class="o">.</span><span class="n">_2</span>

  <span class="k">val</span> <span class="n">diff</span> <span class="k">=</span> <span class="o">(</span><span class="n">theoreticalMean</span> <span class="o">-</span> <span class="n">actualMean</span><span class="o">).</span><span class="n">abs</span>

  <span class="n">diff</span> <span class="o">&lt;</span> <span class="n">diffLimit</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              16/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>We have a Property</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">betaDistributionProp</span><span class="k">:</span> <span class="kt">Prop</span> <span class="o">=</span>
  <span class="n">forAll</span><span class="o">(</span><span class="n">genBetaDistributionMean</span><span class="o">)</span>
        <span class="o">(</span><span class="n">betaDistributionPredicate</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              17/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Running the Property</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">simpleSeed</span> <span class="k">=</span> <span class="nc">RNG</span><span class="o">(</span><span class="mf">123.</span><span class="n">toLong</span><span class="o">)</span>

<span class="k">val</span> <span class="n">tp</span><span class="k">:</span> <span class="kt">TestParameters</span> <span class="o">=</span> 
  <span class="nc">TestParameters</span><span class="o">(</span><span class="mi">32</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="n">simpleSeed</span><span class="o">)</span>

<span class="k">val</span> <span class="n">betaDistributionResult</span><span class="k">:</span> <span class="kt">Result</span> <span class="o">=</span>
  <span class="n">betaDistributionProp</span><span class="o">.</span><span class="n">run</span><span class="o">(</span><span class="n">tp</span><span class="o">)</span>

<span class="n">println</span><span class="o">(</span><span class="s">s&quot;Beta distribution theoretical </span>
<span class="s">  mean and actual mean should be </span>
<span class="s">  less than </span><span class="si">$diffLimit</span><span class="s"> apart&quot;</span><span class="o">)</span>
<span class="n">println</span><span class="o">(</span><span class="n">betaDistributionResult</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              18/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Successful for 16 test cases</h1></header>
            
            
            <section><pre><code>a = (0.518,0.512)  rng1 = RNG(281224260715694)
a = (0.738,0.739)  rng1 = RNG(16414381877132)
a = (0.610,0.581)  rng1 = RNG(227948167035286)
a = (0.640,0.621)  rng1 = RNG(243689560722)
a = (0.520,0.523)  rng1 = RNG(278578944958020)
a = (0.988,0.710)  rng1 = RNG(73703246433449)
a = (0.760,0.761)  rng1 = RNG(278677516185330)
...
Beta distribution theoretical mean and 
  actual mean should be less than 0.5 apart
Passed
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              19/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Tests for production with ScalaCheck</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">UnvalidatedWebForm</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> 
  <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">phoneNumber</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span> 
  <span class="n">email</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">ValidatedWebForm</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> 
  <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">phoneNumber</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span> 
  <span class="n">email</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">type</span> <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Xor</span><span class="o">[</span><span class="kt">NonEmptyList</span><span class="o">[</span><span class="kt">E</span><span class="o">]</span>, <span class="kt">A</span><span class="o">]</span>
</pre></div>

<p>We want to accumulate errors of type <code>E</code>, or pass along a validated <code>A</code>.</p>
<p><code>Left</code> is a failed validation.</p>
<p><code>Right</code> is a successful validation.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              20/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">isAlpha</span><span class="o">(</span><span class="n">string</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="n">minimumLength</span><span class="o">(</span><span class="n">minLength</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)(</span><span class="n">string</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="n">numDigits</span><span class="o">(</span><span class="n">num</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span> <span class="n">length</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Long</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="n">validateEmailAddress</span><span class="o">(</span><span class="n">emailAddress</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">def</span> <span class="n">validateWebForm</span>
  <span class="o">(</span><span class="n">unvalidatedWebForm</span><span class="k">:</span> <span class="kt">UnvalidatedWebForm</span><span class="o">)</span><span class="k">:</span>
  <span class="kt">XorErrors</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">ValidatedWebForm</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              21/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>unvalidated: 
UnvalidatedWebForm(P3t3r,Bec1ch,
                   1234567890,no@suffix)
validated: 
Left(
 OneAnd(String P3t3r contains non-alpha characters,
  List(Not a valid e-mail address: no@suffix, 
    String Bec1ch contains non-alpha characters)))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              22/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Code being tested: </p>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">slideCode.lecture8</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">UnvalidatedWebForm</span><span class="o">(...)</span>
<span class="k">object</span> <span class="nc">ValidatedWebForm</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">ValidatedWebForm</span><span class="o">(...)</span>
</pre></div>

<p>Found in:</p>
<p><code>lectureCode/slideCode/src/main/
  scala/slideCode/lecture8/WebForm.scala</code></p>
<p>In SBT:</p>
<p><code>run</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              23/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Tests:</p>
<div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">slideCode.lecture8</span>
<span class="k">class</span> <span class="nc">WebFormSpec</span> <span class="k">extends</span> <span class="nc">PropSpec</span> 
  <span class="k">with</span> <span class="nc">GeneratorDrivenPropertyChecks</span> 
  <span class="k">with</span> <span class="nc">Matchers</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</pre></div>

<p>Found in:
<code>lectureCode/slideCode/src/test/
  scala/slideCode/lecture8/WebFormTest.scala</code></p>
<p>In SBT:</p>
<p><code>test</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              24/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Generating successful web forms -- names</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">genAlphaString</span><span class="o">(</span><span class="n">length</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Gen</span><span class="o">.</span><span class="n">listOfN</span><span class="o">(</span><span class="n">length</span><span class="o">,</span> <span class="nc">Gen</span><span class="o">.</span><span class="n">alphaChar</span><span class="o">).</span><span class="n">map</span> <span class="o">{</span> 
    <span class="o">(</span><span class="n">listChar</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Char</span><span class="o">])</span> <span class="k">=&gt;</span>
    <span class="n">listChar</span><span class="o">.</span><span class="n">foldRight</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">)(</span><span class="k">_</span><span class="o">+</span><span class="k">_</span><span class="o">)</span>
  <span class="o">}</span>

<span class="k">val</span> <span class="n">genNameSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Gen</span><span class="o">.</span><span class="n">chooseNum</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="n">flatMap</span><span class="o">(</span><span class="n">genAlphaString</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              25/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// Testing  </span>
<span class="c1">// def validateName(name: String): </span>
<span class="c1">//   XorErrors[String, String] = { ... }</span>

<span class="n">property</span><span class="o">(</span><span class="s">&quot;`validateName` should accept alpha-only names</span>
<span class="s">          of length greater than 1 character&quot;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">forAll</span><span class="o">(</span><span class="n">genNameSuccessful</span><span class="o">)</span> <span class="o">{</span> <span class="n">name</span> <span class="k">=&gt;</span>
    <span class="nc">ValidatedWebForm</span><span class="o">.</span><span class="n">validateName</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="n">isRight</span> 
      <span class="n">should</span> <span class="n">be</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              26/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Generating successful web forms -- phone numbers</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genPhoneNumberSevenDigit</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Gen</span><span class="o">.</span><span class="n">chooseNum</span><span class="o">(</span><span class="mf">1000.</span><span class="n">toLong</span><span class="o">,</span> <span class="mf">9999.</span><span class="n">toLong</span><span class="o">).</span>
    <span class="n">map</span><span class="o">((</span><span class="n">l</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">l</span><span class="o">*</span><span class="n">spire</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span>

<span class="k">val</span> <span class="n">genPhoneNumberTenDigit</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="n">genPhoneNumberSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Gen</span><span class="o">.</span><span class="n">oneOf</span><span class="o">(</span><span class="n">genPhoneNumberSevenDigit</span><span class="o">,</span> 
            <span class="n">genPhoneNumberTenDigit</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              27/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// Testing</span>
<span class="c1">// def validatePhoneNumber(phoneNumber: Long): </span>
<span class="c1">//   XorErrors[String, Long] = { ... }</span>

<span class="n">property</span><span class="o">(</span><span class="s">&quot;`validatePhoneNumber` should accept </span>
<span class="s">           phone numbers of 7 digits, </span>
<span class="s">           that do not begin with 0&quot;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">forAll</span><span class="o">(</span><span class="n">genPhoneNumberSevenDigit</span><span class="o">)</span> <span class="o">{</span> <span class="n">phone</span> <span class="k">=&gt;</span>
    <span class="nc">ValidatedWebForm</span><span class="o">.</span>
      <span class="n">validatePhoneNumber</span><span class="o">(</span><span class="n">phone</span><span class="o">).</span><span class="n">isRight</span>
      <span class="n">should</span> <span class="n">be</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              28/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Generating successful web forms -- email addresses</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genSuffix</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">Gen</span><span class="o">.</span><span class="n">oneOf</span><span class="o">(</span><span class="s">&quot;com&quot;</span><span class="o">,</span><span class="s">&quot;net&quot;</span><span class="o">,</span><span class="s">&quot;biz&quot;</span><span class="o">,</span><span class="s">&quot;co&quot;</span><span class="o">)</span>

<span class="k">val</span> <span class="n">genEmailAddressSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> 
    <span class="o">...</span><span class="n">map</span> <span class="o">{</span> <span class="o">...</span> <span class="k">=&gt;</span>
  <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;@&quot;</span> <span class="o">+</span> <span class="n">domain</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="n">suffix</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              29/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge question</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="n">genNameSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>  
<span class="n">genPhoneNumberSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> 
<span class="n">genEmailAddressSuccessful</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>

<span class="c1">// want:</span>
<span class="n">genUnvalidatedWebFormSuccessful</span><span class="k">:</span> 
  <span class="kt">Gen</span><span class="o">[</span><span class="kt">UnvalidatedWebForm</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">UnvalidatedWebForm</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> 
  <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">phoneNumber</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span> 
  <span class="n">email</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              30/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Putting the names, phone numbers, and email addresses together</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">genUnvalidatedWebFormSuccessful</span><span class="k">:</span> 
  <span class="kt">Gen</span><span class="o">[</span><span class="kt">UnvalidatedWebForm</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">genNameSuccessful</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">firstName</span> <span class="k">=&gt;</span>
    <span class="n">genNameSuccessful</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">lastName</span> <span class="k">=&gt;</span>
      <span class="n">genPhoneNumberSuccessful</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">phone</span> <span class="k">=&gt;</span>       
        <span class="n">genEmailAddressSuccessful</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">email</span> <span class="k">=&gt;</span>
          <span class="nc">UnvalidatedWebForm</span><span class="o">(</span><span class="n">firstName</span><span class="o">,</span> <span class="n">lastName</span><span class="o">,</span> 
                             <span class="n">phone</span><span class="o">,</span> <span class="n">email</span><span class="o">)</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              31/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// Testing</span>
<span class="c1">// def validateWebForm</span>
<span class="c1">//  (unvalidatedWebForm: UnvalidatedWebForm):</span>
<span class="c1">//   XorErrors[String, ValidatedWebForm] = { ... }</span>

<span class="n">property</span><span class="o">(</span><span class="s">&quot;`validateWebForm` should accept these </span>
<span class="s">          unvalidated web forms&quot;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">check</span> <span class="o">{</span>
    <span class="nc">Prop</span><span class="o">.</span><span class="n">forAllNoShrink</span>
      <span class="o">(</span><span class="n">genUnvalidatedWebFormSuccessful</span><span class="o">){</span> <span class="n">form</span> <span class="k">=&gt;</span>
      <span class="nc">ValidatedWebForm</span><span class="o">.</span>
        <span class="n">validateWebForm</span><span class="o">(</span><span class="n">form</span><span class="o">).</span>
        <span class="n">isRight</span>
    <span class="o">}</span>
  <span class="o">}</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              32/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Generating failing web forms</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">genAlphaNumericString</span><span class="o">(</span><span class="n">length</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="n">genNameNumericFailing</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Gen</span><span class="o">.</span><span class="n">chooseNum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span>
    <span class="n">flatMap</span><span class="o">(</span><span class="n">genAlphaNumericString</span><span class="o">)</span>

<span class="k">val</span> <span class="n">genPhoneNumberWrongLength</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">Long</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="n">genEmailAddressNoDomainFailing</span><span class="k">:</span> <span class="kt">Gen</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>

  <span class="k">=</span> <span class="o">...</span>

<span class="k">val</span> <span class="n">genUnvalidatedWebFormSuccessful</span><span class="k">:</span> 
  <span class="kt">Gen</span><span class="o">[</span><span class="kt">UnvalidatedWebForm</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              33/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="n">property</span><span class="o">(</span><span class="s">&quot;`validatePhoneNumber` should reject</span>
<span class="s">  phone numbers that are not 7 or 10 digits&quot;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">forAll</span><span class="o">(</span><span class="n">genPhoneNumberWrongLength</span><span class="o">)</span> <span class="o">{</span> <span class="n">phone</span> <span class="k">=&gt;</span>
    <span class="nc">ValidatedWebForm</span><span class="o">.</span>
      <span class="n">validatePhoneNumber</span><span class="o">(</span><span class="n">phone</span><span class="o">).</span>
      <span class="n">isRight</span> 
      <span class="n">should</span> <span class="n">be</span> <span class="o">(</span><span class="kc">false</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Equivalently</p>
<div class="highlight"><pre><span></span>      <span class="n">isLeft</span>
      <span class="n">should</span> <span class="n">be</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              34/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Output</h1></header>
            
            
            <section><pre><code>WebFormSpec:
- `validateName` should accept alpha-only 
   names of length greater than 1 character
- `validateName` should reject names with 
   numeric characters
- `validateName` should reject names of 
   length 1 character
- `validatePhoneNumber` should accept 
  phone numbers of 7 digits, that 
  ...

Suites: completed 1, aborted 0
Tests: succeeded 12, failed 0, canceled 0, 
    ignored 0, pending 0
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              35/36
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture8.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><a href="https://www.scalacheck.org/files/scalacheck_2.11-1.12.5-api/index.html#org.scalacheck.Prop@&amp;&amp;%28p:=%3Eorg.scalacheck.Prop%29:org.scalacheck.Prop">&amp;&amp; in ScalaCheck's <code>Prop</code></a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture8.md">lecture8.md</a>
            </aside>
            
            <aside class="page_number">
              36/36
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Lecture 8: Property-based Testing</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">-</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Gen</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">-</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Prop</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">-</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Testing our Beta Distribution Sampler</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Beta sampler</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">Beta sampler</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">Generating Beta distributions</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Pulling values out of the Generator</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">-</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Producing the Property</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Predicate for testing Beta distributions</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">We have a Property</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Running the Property</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Successful for 16 test cases</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Tests for production with ScalaCheck</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">-</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">-</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">-</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">-</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">Generating successful web forms -- names</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">-</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Generating successful web forms -- phone numbers</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">-</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Generating successful web forms -- email addresses</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Challenge question</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Putting the names, phone numbers, and email addresses together</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">-</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">Generating failing web forms</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Output</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">-</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Expos</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>