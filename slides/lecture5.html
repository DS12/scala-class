<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lecture 5: Laziness and Streams</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Lecture 5: Laziness and Streams</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              1/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>"Separation of program description from evaluation" is promised to us at the beginning of this book.  Laziness is a fundamental component of this.
<br />
<br />
<br />
<br /></p>
<p>We will write <em>descriptions</em> for infinitely long processes, but only <em>evaluate</em> them for a finite length of time, or within some bound.
<br />
<br />
<br />
<br /></p>
<p>First we must review Scala's syntax for laziness, then we will see a data structure that separates "description from evaluation": <code>Stream</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              2/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1><code>val</code></h1></header>
            
            
            <section><p><a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value">Call-by-value</a>
<br />
<br /></p>
<p>Strict/eager, memoizes
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">foo</span> <span class="k">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">5</span>
<span class="n">println</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span>
</pre></div>

<p class="notes">This program is evaluated line by line, from top to bottom.  The cost of time in calculating <code>5+5</code> is paid on the first line.  This cost will only be paid once, ever, for any use of <code>foo</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              3/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1><code>lazy val</code></h1></header>
            
            
            <section><p><a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_need">Call-by-need</a>
<br />
<br /></p>
<p>lazy, memoizes
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">lazy</span> <span class="k">val</span> <span class="n">foo</span> <span class="k">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">5</span>
<span class="n">println</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span>
</pre></div>

<p class="notes">The cost of time and memory in calculating <code>5+5</code> is paid on the second line.  This cost will only be paid once, ever, for any use of <code>foo</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              4/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1><code>def</code></h1></header>
            
            
            <section><p><a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_name">Call-by-name</a>
<br />
<br /></p>
<p>lazy, does not memoize
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">foo</span> <span class="k">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">5</span>
<span class="n">println</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span>
</pre></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<p><a href="http://stackoverflow.com/a/8822824/1007926">Call-by-need versus call-by-name</a></p>
<p class="notes">The cost of time and memory in calculating <code>5+5</code> is paid on the second line.  This cost will be incurred every time <code>foo</code> is used.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              5/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Thunk</h1></header>
            
            
            <section><p>A <a href="https://en.wikipedia.org/wiki/Thunk#Functional_programming">"thunk"</a> uses a function to provide <em>laziness</em>:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">thunk</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="mi">123</span>
</pre></div>

<p><br />
<br />
<br />
<br /></p>
<p><code>expensive</code> will not be called until the thunk is called.</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">thunk2</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Long</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="n">expensive</span><span class="o">()</span>

<span class="c1">// cost incurred here</span>
<span class="k">val</span> <span class="n">expensiveResult</span> <span class="k">=</span> <span class="n">thunk2</span><span class="o">()</span>
</pre></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<p><a href="https://wiki.haskell.org/Lazy_vs._non-strict">Comments on evaluation strategies</a></p>
<p class="notes"><em>Wikipedia</em> says that a "thunk" in Haskell memoizes.  This is not true in Scala.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              6/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Arguments to a function</h1></header>
            
            
            <section><p><a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_name">Call-by-name</a> with <code>=&gt;</code>
<br />
<br />
Avoid the evaluation of the <code>B</code> value if the <code>A</code> value is available
<br /></p>
<div class="highlight"><pre><span></span><span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">getOrElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=</span> 
    <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">get</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">get</span>
      <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="n">default</span>
    <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>

<p><br />
in <code>common.lecture4.FPOption</code>
<br />
<br />
<br />
<br />
See <a href="http://www.artima.com/pins1ed/control-abstraction.html#9.5">Section 9.5 of <em>Programming in Scala</em></a></p>
<p class="notes">I feel this call-by-name syntax is far more understandable/justifiable after seeing the Stream combinators.  Some Stream combinators cannot be implemented without call-by-name syntax.  Outside of the context of lazy data structures like Stream, the only justification for call-by-name syntax is "short-circuiting" and avoiding the evaluation of expensive expressions, a.f.a.i.k.  "Separation of description from evaluation" encompasses (1) short-circuiting, (2) avoiding the evaluation of unnecessary, expensive expressions, and (3) lazy data structures.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              7/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>List (eager)</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// abstract</span>
<span class="k">sealed</span> <span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span>
<span class="c1">// concrete</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Nil</span> 
  <span class="k">extends</span> <span class="nc">List</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Cons</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">head</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> 
                    <span class="n">tail</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> 
  <span class="k">extends</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              8/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Stream</h1></header>
            
            
            <section><p>a.k.a. lazy list</p>
<div class="highlight"><pre><span></span><span class="c1">// abstract</span>
<span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span>
<span class="c1">// concrete</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Empty</span> 
  <span class="k">extends</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Cons</span><span class="o">[</span><span class="kt">+C</span><span class="o">](</span><span class="n">h</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="n">C</span><span class="o">,</span>
                    <span class="n">t</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">C</span><span class="o">])</span> 
    <span class="k">extends</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span>
</pre></div>

<p><br />
<br /></p>
<ul>
<li>the tail of <code>Cons</code> of <code>List</code> is <em>eager</em></li>
<li>the tail of <code>Cons</code> of <code>Stream</code> is <em>lazy</em></li>
</ul>
<p>This is the most important difference between the two</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              9/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><p>Scala does not support <code>call-by-name</code> parameters in <code>case class</code>. </p>
<p>We use thunks as a work-around.  </p>
<div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Cons</span><span class="o">[</span><span class="kt">+C</span><span class="o">](</span><span class="n">h</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="n">C</span><span class="o">,</span>
                    <span class="n">t</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">C</span><span class="o">])</span> 
    <span class="k">extends</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span>
</pre></div>

<p><br />
<br />
<br />
<br /></p>
<p>The chosen syntax for a call-by-name argument was probably chosen for its resemblance to a thunk.</p>
<div class="highlight"><pre><span></span><span class="c1">// Compare</span>
<span class="k">def</span> <span class="n">bar</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span>
<span class="c1">// to</span>
<span class="k">def</span> <span class="n">baz</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span>
</pre></div>

<p class="notes"> A thunk is a function with no argument</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              10/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            
            <section><pre><code>scala&gt;  Cons(() =&gt; 1, 
     () =&gt; Cons(() =&gt; 2, 
                () =&gt; Cons(() =&gt; 3, 
                           () =&gt; Cons(() =&gt; 4, 
                                      () =&gt; Empty
                                     )
                          )

               )
    )

res0: common.lecture5.Cons[Int] =
  Cons(&lt;function0&gt;,&lt;function0&gt;)
</code></pre>
<p>Note the type has been inferred as <code>Cons[Int]</code> rather than <code>Stream[Int]</code>.  We also encountered this issue with <code>List</code>.</p>
<p class="notes">Before "tying the knot" and introduction of <code>take</code>, I think its necessary to show a manually constructed <code>Stream</code> like this.  The stack trace of <code>take</code> on an infinite <code>Stream</code> will arrive at this finite Stream.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              11/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Smart constructor</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">cons</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">hd</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="o">,</span> <span class="n">tl</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> 
  <span class="kt">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">lazy</span> <span class="k">val</span> <span class="n">head</span> <span class="k">=</span> <span class="n">hd</span>
    <span class="k">lazy</span> <span class="k">val</span> <span class="n">tail</span> <span class="k">=</span> <span class="n">tl</span>
    <span class="nc">Cons</span><span class="o">(()</span> <span class="k">=&gt;</span> <span class="n">head</span><span class="o">,</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="n">tail</span><span class="o">)</span>
  <span class="o">}</span>

<span class="k">def</span> <span class="n">empty</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Empty</span>
</pre></div>

<p><br />
<br />
<br /></p>
<p class="notes">The <code>cons</code> smart constructor (1) memoizes (2) hides the thunks (3) assists with type inference.  Because of the type annotation <code>def cons[A](...): Stream[A]</code>, a constructed Cons will be inferred to be of type Stream, not of type Cons.  This is the same issue we encountered with Cons of List.  The <code>empty[A]</code> smart constructor only assists with type inference</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              12/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            
            <section><p>Using the smart constructor </p>
<pre><code>scala&gt; cons(1, cons(2, cons(3, cons(4, empty))))

res1: common.lecture5.Stream[Int] =
       Cons(&lt;function0&gt;,&lt;function0&gt;)
</code></pre>
<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<p>Type has been inferred correctly as <code>Stream[Int]</code>.</p>
<p class="notes">Equivalent to the structure two slides earlier.  Head and Tail elements of each Cons are lazy.  Call-by-name syntax in smart constructor removes need for thunks</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              13/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1><a href="https://github.com/fpinscala/fpinscala/wiki/Chapter-5:-Strictness-and-laziness#tying-the-knot">Tying the Knot</a></h1></header>
            
            
            <section><p>With strict evaluation, <code>fibonacciHelper</code> would be an endless loop and lead to stack overflow.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">fibonacciHelper</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">fibonacciHelper</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">))</span>

<span class="k">val</span> <span class="n">fibonacci</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">fibonacciHelper</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">fibonacci</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="mi">22</span><span class="o">)</span>
</pre></div>

<p><br /></p>
<p>output</p>
<pre><code>0, 1, 1, 2, 3, 5, 8, 13, 21, 34 ...
</code></pre>
<p><br /></p>
<p><a href="http://philwantsfish.github.io/scala/streamsandprimes">Source</a></p>
<p class="notes">It will still lead to stack overflow, but the lazy list gives us more control over this.  We still need to limit our consumption of the Fibonacci stream.  <code>print</code> will be explained later</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              14/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge question</h1></header>
            
            
            <section><p>Use the <code>cons</code> smart constructor to implement a sine wave.  Implement the sine wave for multiples of π/3 radian, or multiples of π/2 radian.
<br />
<br />
Utilize <code>math.sqrt(Double): Double</code>
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">sinePositive</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>


<span class="k">def</span> <span class="n">sineNegative</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sinePositive</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">d</span> <span class="k">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">d</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              15/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>sinePositive</code> corresponds to the top half of the unit circle, including <code>(1, 0)</code> and excluding <code>(-1, 0)</code>
<img alt="" src="images/lecture5/unit_circle.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              16/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Answer</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">sinePositive</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span>
    <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span>
      <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="o">(</span><span class="mi">3</span><span class="o">)/</span><span class="mi">2</span><span class="o">,</span>
        <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mf">1.0</span><span class="o">,</span>
          <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="o">(</span><span class="mi">3</span><span class="o">)/</span><span class="mi">2</span><span class="o">,</span>
            <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">sineNegative</span><span class="o">)</span>
  <span class="o">)))))</span>

<span class="k">def</span> <span class="n">sineNegative</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sinePositive</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">d</span> <span class="k">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">d</span> <span class="o">}</span>

<span class="n">sinePositive</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="mi">32</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              17/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>0.0
0.5
0.8660254037844386
1.0
0.8660254037844386
0.5
-0.0
-0.5
-0.8660254037844386
-1.0
-0.8660254037844386
-0.5
0.0
0.5
...
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              18/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1><code>from</code></h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">from</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">cons</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">from</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>

<p><br />
<br />
<br />
<br /></p>
<p>example</p>
<pre><code>scala&gt; Stream.from(0).print(8)
0
1
2
3
4
5
6
7
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              19/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge question</h1></header>
            
            
            <section><p>We can turn an infinite <code>Stream</code> into a finite <code>Stream</code> with <code>take.</code>  <code>take</code> is a method that exists inside the <code>Stream</code> trait.</p>
<p><code>countFromZero.take(6)</code> will insert an <code>Empty</code> after the sixth element of the infinite <code>Stream</code>.</p>
<p>Complete the implementation of <code>take</code>:</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">take</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">cons</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">)</span> <span class="k">if</span> <span class="o">???</span> <span class="k">=&gt;</span> <span class="o">???</span>
    <span class="k">case</span> <span class="n">cons</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">)</span> <span class="k">if</span> <span class="o">???</span> <span class="k">=&gt;</span> <span class="o">???</span>
    <span class="k">case</span> <span class="nc">Empty</span> <span class="k">=&gt;</span> <span class="n">empty</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>

<p><br />
<br /></p>
<p><code>print</code> relies upon <code>take</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              20/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Answer</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">take</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">cons</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">)</span> <span class="k">if</span> <span class="n">n</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">=&gt;</span> 
      <span class="n">cons</span><span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">.</span><span class="n">take</span><span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">))</span>
    <span class="k">case</span> <span class="n">cons</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">)</span> <span class="k">if</span> <span class="n">n</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="k">=&gt;</span> 
      <span class="n">empty</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
    <span class="k">case</span> <span class="nc">Empty</span> <span class="k">=&gt;</span> 
      <span class="n">empty</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              21/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            
            <section><p>Trace</p>
<pre><code>from(0).take(4)
cons(0, from(1).take(3))
cons(0, cons(1, from(2).take(2)))
cons(0, cons(1, cons(2, from(3).take(1))))
cons(0, cons(1, cons(2, cons(3, from(4).take(0)))))
cons(0, cons(1, cons(2, cons(3, Empty))))
</code></pre>
<p class="notes">Evaluation is explained later.  <code>take</code> is not evaluation.  If only two elements are evaluated, then this trace will be shortened.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              22/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>foldRight</h1></header>
            
            
            <section><p><code>foldRight</code> on <code>List</code></p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">foldRight</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">z</span><span class="k">:</span> <span class="kt">B</span><span class="o">)</span>
                  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=</span>
    <span class="n">as</span> <span class="k">match</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="n">z</span>
      <span class="k">case</span> <span class="nc">Cons</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">tail</span><span class="o">)</span> <span class="k">=&gt;</span> 
        <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">tail</span><span class="o">.</span><span class="n">foldRight</span><span class="o">(</span><span class="n">z</span><span class="o">)(</span><span class="n">f</span><span class="o">))</span>
    <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              23/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><p><code>foldRight</code> on <code>Stream</code></p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">foldRight</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">z</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span>
                  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=</span> 
    <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">Empty</span> <span class="k">=&gt;</span> <span class="n">z</span>
      <span class="k">case</span> <span class="n">cons</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">)</span> <span class="k">=&gt;</span> 
        <span class="n">f</span><span class="o">(</span><span class="n">head</span><span class="o">,</span> <span class="n">lazyTail</span><span class="o">.</span><span class="n">foldRight</span><span class="o">(</span><span class="n">z</span><span class="o">)(</span><span class="n">f</span><span class="o">))</span>
    <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>

<p class="notes">Remind them lazy tail in Stream.cons; case class Cons<a href="h: () =&gt; C, t: () =&gt; Stream[C]">+C</a> </p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              24/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><p><code>foldRight</code> is not suitable to be used on an infinite <code>Stream</code>.</p>
<p>Furthermore, <code>foldRight</code> is not tail-recursive.
<br />
<br />
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">foldRight</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">z</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span>
                  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=</span> <span class="o">...</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>

<p class="notes">Point out which combinators on <code>Stream</code> are suitable to be used on an infinite <code>Stream</code>, and which are not</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              25/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Limit an infinite <code>Stream</code> to a finite length with <code>take</code> before calling <code>foldRight</code>.  </p>
<p>Despite this precaution, a <code>Stream</code> of finite length <a href="https://groups.google.com/forum/#!topic/scala-functional/MKZ5olHHSwQ">may still overflow the stack because of <code>foldRight</code>'s tail-calls.</a></p>
<p><br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">summed</span> <span class="k">=</span> 
  <span class="nc">Stream</span><span class="o">.</span><span class="n">from</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">take</span><span class="o">(</span><span class="mi">100</span><span class="o">).</span><span class="n">foldRight</span><span class="o">(</span><span class="mi">0</span><span class="o">)(</span><span class="k">_</span><span class="o">+</span><span class="k">_</span><span class="o">)</span>

<span class="n">println</span><span class="o">(</span><span class="s">s&quot;sum of 0 to 99, inclusive = </span><span class="si">$summed</span><span class="s">&quot;</span><span class="o">)</span>

<span class="c1">// sum of 0 to 99, inclusive = 4950</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              26/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>map</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">g</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">sb</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
      <span class="n">cons</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="n">sb</span><span class="o">)</span>

    <span class="n">foldRight</span><span class="o">(</span><span class="n">empty</span><span class="o">[</span><span class="kt">B</span><span class="o">])(</span><span class="n">g</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              27/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">radians</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">Stream</span><span class="o">.</span><span class="n">from</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">map</span> <span class="o">{</span> <span class="n">i</span> <span class="k">=&gt;</span>
                       <span class="n">i</span><span class="o">.</span><span class="n">toDouble</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="nc">Pi</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">}</span>


<span class="k">val</span> <span class="n">cosineWave</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">radians</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">d</span> <span class="k">=&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="o">(</span><span class="n">d</span><span class="o">)</span> <span class="o">}</span>
</pre></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<p class="notes">An implementation of <code>map</code> on an <code>Array</code> can process the elements in parallel because an <code>Array</code> provides O(1) access to any element.  An implementation of <code>map</code> on a <code>List</code> cannot process the elements in parallel because a <code>List</code> provides O(n) access to any element.  Mapping over a List occurs sequentially.  Understanding this, it is more intuitive how <code>map</code> on a <code>Stream</code> is sequential and lazy.  In this example, <code>66.toChar</code> preceed the lazy evaluation of <code>67.toChar</code>, and so on.  Anyone who thinks mapping over a <code>List</code> happens "all at once" will be confused by mapping over a Stream.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              28/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="" src="images/lecture5/sine_wave.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              29/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>flatMap</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">append</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">appended</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> 
    <span class="kt">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>

  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> 
    <span class="kt">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">g</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">sb</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span> <span class="k">=</span>
      <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="n">append</span><span class="o">(</span><span class="n">sb</span><span class="o">)</span>

    <span class="n">foldRight</span><span class="o">(</span><span class="n">empty</span><span class="o">[</span><span class="kt">B</span><span class="o">])(</span><span class="n">g</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>

<p class="notes">It is impossible for <code>map</code> to lengthen the Stream.  <code>flatMap</code> can do this.  We can interpolate more points in the sine wave with <code>flatMap</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              30/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">// def flatMap[B](f: A =&gt; Stream[B]): Stream[B]</span>

<span class="k">val</span> <span class="n">interpolatedSineWave</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> 
  <span class="n">sineWave</span><span class="o">.</span><span class="n">take</span><span class="o">(</span><span class="mi">32</span><span class="o">).</span><span class="n">flatMap</span> <span class="o">{</span> <span class="n">d</span> <span class="k">=&gt;</span>
    <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">empty</span><span class="o">))</span>
  <span class="o">}</span>
</pre></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<p>in <code>slideCode.lecture5.SineWave</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              31/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="" src="images/lecture5/sine_wave_interpolated.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              32/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Evaluation</h1></header>
            
            
            <section><p>Exiting the <code>Stream</code></p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">print</span><span class="o">(</span><span class="n">upTo</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">remaining</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
      <span class="n">remaining</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="n">take</span><span class="o">(</span><span class="n">upTo</span><span class="o">).</span><span class="n">foldRight</span><span class="o">(</span><span class="n">upTo</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              33/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Stream</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">def</span> <span class="n">force</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">la</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span> <span class="n">a</span><span class="o">::</span><span class="n">la</span>

    <span class="k">this</span><span class="o">.</span><span class="n">take</span><span class="o">(</span><span class="n">n</span><span class="o">).</span><span class="n">foldRight</span><span class="o">(</span><span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]())(</span><span class="n">f</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              34/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">],</span> <span class="n">maxElements</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">f</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">s</span>
  <span class="n">s</span><span class="o">.</span><span class="n">take</span><span class="o">(</span><span class="n">maxElements</span><span class="o">).</span><span class="n">foldRight</span><span class="o">(</span><span class="mi">0</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p><br />
<br /></p>
<p>Usage</p>
<pre><code>scala&gt; from(4)
res0: fpinscala.laziness.Stream[Int] = 
  Cons(&lt;function0&gt;,&lt;function0&gt;)

scala&gt; sum(from(4), 10)
res1: Int = 85
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              35/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>unfold</h1></header>
            
            
            <section><p><code>unfold</code> helps to create <code>Stream</code>s</p>
<p><br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">unfold</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">S</span><span class="o">](</span><span class="n">z</span><span class="k">:</span> <span class="kt">S</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="kt">S</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">S</span><span class="o">)])</span><span class="k">:</span> 
  <span class="kt">Stream</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              36/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Many of the exercises can be re-implemented with <code>unfold</code> -- often more cleanly.
<br />
<br /></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">from</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">unfold</span><span class="o">(</span><span class="n">n</span><span class="o">)((</span><span class="n">n0</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="n">n0</span><span class="o">,</span> <span class="n">n0</span><span class="o">+</span><span class="mi">1</span><span class="o">))</span>

<span class="n">from</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="n">print</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
<span class="c1">// 5</span>
<span class="c1">// 6</span>
<span class="c1">// 7</span>
<span class="c1">// 8</span>
<span class="c1">// 9</span>
<span class="c1">// 10</span>
</pre></div>

<p><br />
<br /></p>
<p>in <code>common.lecture5.StreamExamples</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              37/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture5.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">fromTo</span><span class="o">(</span><span class="n">lowerInclusive</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> 
           <span class="n">upperExclusive</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span><span class="kt">Stream</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span><span class="k">=</span>
  <span class="n">unfold</span><span class="o">(</span><span class="n">lowerInclusive</span><span class="o">){(</span><span class="n">n0</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">n0</span> <span class="o">&lt;</span> <span class="n">upperExclusive</span><span class="o">)</span> <span class="nc">Some</span><span class="o">(</span><span class="n">n0</span><span class="o">,</span> <span class="n">n0</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span>
    <span class="k">else</span> <span class="nc">None</span>
  <span class="o">}</span>

<span class="n">fromTo</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">8</span><span class="o">).</span><span class="n">print</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
<span class="c1">// 5</span>
<span class="c1">// 6</span>
<span class="c1">// 7</span>
<span class="c1">// Stream ends before 6 elements can be printed</span>
</pre></div>

<p><br /></p>
<p>in <code>common.lecture5.StreamExamples</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture5.md">lecture5.md</a>
            </aside>
            
            <aside class="page_number">
              38/38
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /38
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Lecture 5: Laziness and Streams</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">-</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3"><code>val</code></a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4"><code>lazy val</code></a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5"><code>def</code></a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Thunk</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Arguments to a function</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">List (eager)</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Stream</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">-</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">-</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Smart constructor</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14"><a href="https://github.com/fpinscala/fpinscala/wiki/Chapter-5:-Strictness-and-laziness#tying-the-knot">Tying the Knot</a></a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Challenge question</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">-</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Answer</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">-</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19"><code>from</code></a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Challenge question</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Answer</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">-</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">foldRight</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">-</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">-</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">-</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">map</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">-</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">-</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">flatMap</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">-</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">-</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">Evaluation</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">-</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">unfold</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">-</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">-</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>