<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Untitled Presentation</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">cats._</span><span class="o">,</span> <span class="n">cats</span><span class="o">.</span><span class="n">std</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="k">_</span>
<span class="k">import</span> <span class="nn">cats.syntax.eq._</span><span class="o">,</span> <span class="n">cats</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="nc">State</span><span class="o">,</span> 
<span class="c1">//case class State[S,+A](run: S =&gt; (S, A)){ ... }</span>
<span class="k">def</span> <span class="n">set</span><span class="o">[</span><span class="kt">S</span><span class="o">](</span><span class="n">s</span><span class="k">:</span> <span class="kt">S</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="o">()))</span>
<span class="c1">//set value</span>
<span class="k">def</span> <span class="n">pure</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">a</span><span class="o">))</span>
<span class="k">def</span> <span class="n">get</span><span class="o">[</span><span class="kt">S</span><span class="o">]</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">S</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">s</span><span class="o">))</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              1/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val foo = get[Int]
foo: State[Int,Int] = StateT@30dfee57
scala&gt; foo.run(1).value
res0: (Int, Int) = (1,1)
scala&gt; foo.run(2).value
res1: (Int, Int) = (2,2)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              2/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val bar = set(1)
s: State[Int,Unit] = StateT@b704c98
scala&gt; bar.run(1).value
res2: (Int, Unit) = (1,())
scala&gt; bar.run(2).value
res3: (Int, Unit) = (1,())
scala&gt; bar.flatMap(_ =&gt; foo).run(2).value
res4: (Int, Int) = (1,1)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              3/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val hi = bar.flatMap(_ =&gt; pure("hi"))
hi: StateT[Eval,Int,String] = StateT@13bdf906
scala&gt; hi.map(_++" there").run(2).value
res5: (Int, String) = (1,hi there)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              4/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>set</code> doesn't add values</p>
<pre><code>scala&gt; def addOne(i: Int) = i+1
addOne: (i: Int)Int
scala&gt; foo.map(addOne).run(1).value
res6: (Int, Int) = (1,2)
scala&gt; bar.map(addOne).run(1).value 
&lt;console&gt;:33: error: type mismatch;
 found   : Int =&gt; Int
 required: Unit =&gt; ?
       bar.map(foo).run(1).value
         ^
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              5/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="c1">//simple stack example</span>
<span class="k">type</span> <span class="kt">Stack</span> <span class="o">=</span> <span class="nc">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="k">def</span> <span class="n">push</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="nc">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">xs</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">,</span> <span class="o">())</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">pop</span> <span class="k">=</span> <span class="nc">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Int</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xs</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">xs</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
  <span class="k">case</span> <span class="nc">Nil</span>     <span class="k">=&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">error</span><span class="o">(</span><span class="s">&quot;empty&quot;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              6/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val l = List(2, 1)
l: List[Int] = List(2, 1)
scala&gt; push(3).run(l).value
res7: (Stack, Unit) = (List(3, 2, 1),())
scala&gt; pop.run(l).value
res8: (Stack, Int) = (List(1),2)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              7/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; push(3).flatMap( _ =&gt; pop.map(a =&gt; a+10))
res9: StateT[Eval,Stack,Int] = StateT@494f7a8
scala&gt; res9.run(l).value
res10: (Stack, Int) = (List(2, 1),13)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              8/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">stackManip</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">for</span> <span class="o">{</span>
    <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">push</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
    <span class="n">a</span> <span class="k">&lt;-</span> <span class="n">pop</span>
  <span class="o">}</span> <span class="k">yield</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              9/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; stackManip.run(l).value
res11: (Stack, Int) = (List(2, 1),3)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              10/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">push1</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">for</span> <span class="o">{</span>
    <span class="n">xs</span> <span class="k">&lt;-</span> <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">]</span>
    <span class="n">s</span> <span class="k">&lt;-</span> <span class="nc">State</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span>
  <span class="o">}</span> <span class="k">yield</span> <span class="n">s</span>
</pre></div>

<p><br>
   <br>
    scala&gt; push2(3).run(l).value
    res12: (Stack, Unit) = (List(3, 2, 1),())</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              11/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Exercise</h1></header>
            
            
            <section><p>Work through this on paper using the substitution rule.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">push2</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">]</span>
       <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span> <span class="n">xs</span> <span class="k">=&gt;</span> <span class="nc">State</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">))</span>
</pre></div>

<p><br>
   <br>
    scala&gt; push2(3).run(l).value
    res13: (Stack, Unit) = (List(3, 2, 1),())</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              12/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">set</span><span class="o">[</span><span class="kt">S</span><span class="o">](</span><span class="n">s</span><span class="k">:</span> <span class="kt">S</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="o">()))</span>
<span class="k">def</span> <span class="n">get</span><span class="o">[</span><span class="kt">S</span><span class="o">]</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">S</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">s</span><span class="o">))</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">{</span>
    <span class="k">val</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">s1</span><span class="o">)</span> <span class="k">=</span> <span class="n">run</span><span class="o">(</span><span class="n">s</span><span class="o">)</span>
    <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="n">run</span><span class="o">(</span><span class="n">s1</span><span class="o">)</span>
  <span class="o">})</span>
<span class="k">def</span> <span class="n">push2</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">]</span>
       <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span> <span class="n">xs</span> <span class="k">=&gt;</span> <span class="nc">State</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">))</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              13/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">pop1</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">for</span> <span class="o">{</span>
    <span class="n">s</span> <span class="k">&lt;-</span> <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">]</span>
    <span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span> <span class="k">=</span> <span class="n">s</span>
  <span class="o">}</span> <span class="k">yield</span> <span class="n">x</span>
</pre></div>

<p><br>
   <br>
    scala&gt; pop1.runS(l).value
    res14: Stack = List(4, 3, 2, 1)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              14/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">pop2</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">]</span>
       <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">{</span>
          <span class="k">val</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">xs</span><span class="o">)</span> <span class="k">=</span> <span class="n">s</span>
          <span class="n">pure</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="c1">//stack is stale</span>
          <span class="o">})</span>
</pre></div>

<p><br>
   <br>
    scala&gt; pop2.run(l).value
    res15: (Stack, Int) = (List(4, 3, 2, 1),4)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              15/16
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture6a.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">pop3</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">Stack</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">State</span><span class="o">.</span><span class="n">get</span><span class="o">[</span><span class="kt">Stack</span><span class="o">].</span><span class="n">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">{</span>
    <span class="k">val</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">xs</span><span class="o">)</span> <span class="k">=</span> <span class="n">s</span>
    <span class="nc">State</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="n">xs</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="n">x</span><span class="o">)</span>
</pre></div>

<p>})</p>
<p><br>
   <br>
    scala&gt; pop3.run(l).value
    res16: (Stack, Int) = (List(3, 2, 1),4)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture6a.md">lecture6a.md</a>
            </aside>
            
            <aside class="page_number">
              16/16
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">-</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">-</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">-</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">-</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">-</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">-</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">-</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">-</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">-</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">-</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Exercise</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">-</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">-</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">-</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>