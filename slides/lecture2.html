<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lecture 2: Higher-Kinded Types</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Lecture 2: Higher-Kinded Types</h1></header>
            
            
            <section><p><img alt="" src="images/lecture2/cats.jpg" /></p>
<p><center><a href="http://typelevel.org/cats/api/#package">Cats</a> and <a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Boxes</a></center></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              1/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>The bread and butter of everyday functional programming is the implementation of standard functional combinators for your datatypes.
<br />
<br />
For example, fluency with the <code>flatMap</code> combinator, also known as <code>&gt;&gt;=</code>, is very important.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              2/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>The best way to acquire this comfort is to reimplement it a bunch of times, so Functional Programming in Scala has you do just that.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">List</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">E</span>, <span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">B</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              3/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>The similarity at the type level is obvious, however there are further connections.
<br />
<br />
When you write functions using <code>flatMap</code>, in any of the varieties above, these functions inherit a sort of sameness from the underlying <code>flatMap</code> combinator.
<br />
<br />
Gabriel Gonzalez has referred to this sort of composability as the <a href="http://www.haskellforall.com/2012/08/the-category-design-pattern.html">'catergory theory design pattern'</a>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              4/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>For example, supposing we have <code>map</code> and <code>flatMap</code> for a type, we can ‘tuple’ the values within:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">tuple</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span>
  <span class="kt">List</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span> <span class="k">=</span>
    <span class="n">x</span><span class="o">.</span><span class="n">flatMap</span><span class="o">{</span><span class="n">a</span> <span class="k">=&gt;</span> <span class="n">y</span><span class="o">.</span><span class="n">map</span><span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="k">_</span><span class="o">))}</span>
<span class="k">def</span> <span class="n">tuple</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span>
  <span class="kt">Option</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span> <span class="k">=</span>
    <span class="n">x</span><span class="o">.</span><span class="n">flatMap</span><span class="o">{</span><span class="n">a</span> <span class="k">=&gt;</span> <span class="n">y</span><span class="o">.</span><span class="n">map</span><span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="k">_</span><span class="o">))}</span>
<span class="k">def</span> <span class="n">tuple</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span>
  <span class="kt">State</span><span class="o">[</span><span class="kt">S</span>, <span class="o">(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span> <span class="k">=</span>
    <span class="n">x</span><span class="o">.</span><span class="n">flatMap</span><span class="o">{</span><span class="n">a</span> <span class="k">=&gt;</span> <span class="n">y</span><span class="o">.</span><span class="n">map</span><span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="k">_</span><span class="o">))}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              5/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Functional Programming in Scala introduces several such functions, such as <code>sequence</code> and <code>traverse</code>.
<br />
<br />
These are each implemented for several types, each time with potentially the same code, if you remember to look back and try copying and pasting a previous solution.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              6/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We would like to follow the DRY principle and parameterize: extract the parts that are different to arguments, and recycle the common code for all situations.
<br />
<br />
In <code>tuple</code>’s case, what is different are the <code>flatMap</code> and <code>map</code> combinator implementations, and the type constructor: <code>List</code>, <code>Option</code>, <code>State</code>, etc.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              7/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We already have a way to swap out different implementations of the <code>flatMap</code> and <code>map</code> combinators.
<br />
<br />
To generalize the notion of 'tupleability' however, we need to pass type-level functions as arguments.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              8/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>You could think of this as a kind of type-level parametric polymorphism:
<br />
<br />
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;}
.tg .tg-9hbo{font-weight:bold;vertical-align:top}
.tg .tg-yw4l{vertical-align:top}
</style>
<table class="tg">
 <tr>
   <th class="tg-9hbo">zero-order</th>
   <th class="tg-9hbo">first-order</th>
   <th class="tg-9hbo">second-order</th>
 </tr>
 <tr>
   <td class="tg-9hbo">42</td>
   <td class="tg-yw4l">(x: Int) =&gt; x</th>
   <td class="tg-yw4l">(f: (Int =&gt; Int)) =&gt; f(42)</th>
 </tr>
 <tr>
   <td class="tg-9hbo">Int</td>
   <td class="tg-yw4l">List[<em>]</th> <br />
   <td class="tg-yw4l">Monad [M[</em>]]</th>
 </tr>
</table></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              9/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>The parameter declaration <code>F[_]</code> means that <code>F</code> may not be a simple type, like <code>Int</code> or <code>String</code>, but instead a one-argument type constructor, like <code>List</code> or <code>Option</code>.
<br />
<br />
Performing these substitutions for <code>tupleF</code>, we get:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">tupleF</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              10/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>More complicated and powerful cases are available using partial application.
<br />
<br />
That’s how we can fit <code>State</code>, <code>Either</code>, <code>Reader</code>, <code>Writer</code> and other type constructors with two or more parameters..</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              11/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>The type of <code>tupleF</code> expresses precisely our intent—the idea of “multiplying” two <code>F</code>s, tupling the values within—but cannot be implemented as written.
<br />
<br />
That’s because we don’t have functions that operate on <code>F</code>-constructed values, like <code>x: F[A]</code> and <code>y: F[B]</code>.
<br />
<br />
As with any value of an ordinary type parameter, these are opaque.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              12/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>One option is to use subtype polymorphism, we could implement a trait that itself uses a type constructor parameter, then make every type we’d like to support inherit from it:</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Monadic</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">tupleF2</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span>
    <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Monadic</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Monadic</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">B</span><span class="o">])</span><span class="k">:</span>
      <span class="kt">F</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span> <span class="k">=</span>
        <span class="n">x</span><span class="o">.</span><span class="n">flatMap</span><span class="o">{</span><span class="n">a</span> <span class="k">=&gt;</span> <span class="n">y</span><span class="o">.</span><span class="n">map</span><span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="k">_</span><span class="o">))}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              13/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>There are several major problems with the subtyping generalization in <code>Monadic</code>.
<br />
<br />
These are sufficiently bad to make subtype polymorphism extremely unpopular in the Scala functional community, though you occasionally see it in older code (e.g. <a href="https://github.com/ermine-language/ermine-parser/blob/cc77bf6e150a16129744d18d69022f7b5902814f/src/main/scala/scalaparsers/Monadic.scala">Ermine</a>)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              14/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>First, this pattern can only be applied to classes that we have written ourselves.
<br />
<br />
Second, the knowledge required to work out the new type signature above is excessively magical: note how much <code>tupleF</code> looked like the <code>List</code>-specific type, and how little <code>tupleF2</code> looks like either of them.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              15/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>There are also complex rules about when implicit conversion happens, how much duplication of the reference to <code>Monadic</code> is required to have the <code>F</code> parameter infer correctly, and even how many calls to <code>Monadic</code> methods are performed.
<br />
<br />
For example, we’d have to declare the <code>F</code> parameter as <code>F[X] &lt;: Monadic[F, X]</code> if we did one more trailing map call. But then we wouldn’t support implicit conversion cases anymore, so we’d have to do something else, too.</p>
<p>Luckily typeclasses provide an elegant solution to constraining higher-kinded types.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              16/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>For <code>tupleF</code>, that means we leave <code>F</code> abstract, and leave the argument and the return type unchanged, but add an implicit argument for the typeclass instance:</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Monad</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]]</span> <span class="o">{</span>
  <span class="c1">// note the new fa argument</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">fa</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              17/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>We then define instances for the types we’d like to have this on: <code>Monad[List]</code>, <code>Monad[Option]</code>, etc. Finally, we just add an implicit argument to tupleF:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">tupleF3</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">y</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
           <span class="o">(</span><span class="k">implicit</span> <span class="n">F</span><span class="k">:</span> <span class="kt">Monad</span><span class="o">[</span><span class="kt">F</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[(</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">)]</span> <span class="k">=</span>
  <span class="n">F</span><span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">x</span><span class="o">){</span><span class="n">a</span> <span class="k">=&gt;</span> <span class="n">F</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">y</span><span class="o">)((</span><span class="n">a</span><span class="o">,</span> <span class="k">_</span><span class="o">))}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              18/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Since version 2.8, Scala has provided syntax for implicit parameters, called Context Bounds.
<br />
<br />
We can remove the implicit <code>F</code> argument, replacing it with a context bound <code>F[_]: Monad</code> in the type argument list.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              19/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Context Bounds</h1></header>
            
            
            <section><p>Briefly, a method with a type parameter <code>A</code> that requires an implicit parameter of type <code>M[A]</code>, such as</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">foo</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">ma</span><span class="k">:</span> <span class="kt">M</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span>
</pre></div>

<p><br />
<br /></p>
<p>can be rewritten as:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">foo</span><span class="o">[</span><span class="kt">A:</span> <span class="kt">M</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              20/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>If a name is needed, you can still retain the terse method signature with a context bound, and call <code>implicitly</code> to materialize the value:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">foo</span><span class="o">[</span><span class="kt">A:</span> <span class="kt">M</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
   <span class="k">val</span> <span class="n">ma</span> <span class="k">=</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">M</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              21/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Application: Insertion Sort</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">insertionSort</span><span class="o">[</span><span class="kt">A</span> <span class="kt">:</span> <span class="kt">Ordering</span><span class="o">](</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span>
  <span class="n">l</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]())</span> <span class="o">{</span> <span class="o">(</span><span class="n">r</span><span class="o">,</span><span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="k">val</span> <span class="n">ord</span> <span class="k">=</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Ordering</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
    <span class="k">val</span> <span class="o">(</span><span class="n">front</span><span class="o">,</span> <span class="n">back</span><span class="o">)</span> <span class="k">=</span> <span class="n">r</span><span class="o">.</span><span class="n">partition</span><span class="o">(</span><span class="n">ord</span><span class="o">.</span><span class="n">lt</span><span class="o">(</span><span class="n">c</span><span class="o">,</span> <span class="k">_</span><span class="o">))</span>
    <span class="n">front</span> <span class="o">:::</span> <span class="n">c</span> <span class="o">::</span> <span class="n">back</span>
  <span class="o">}</span>
<span class="n">insertionSort</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span>
<span class="c1">//res0: List[Int] = List(4, 3, 2, 1)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              22/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>What's the point of passing an implicit parameter in a context bound but <em>not</em> naming it?
<br />
<br />
Often, the implicit parameter need not be referred to directly, it will be tunneled through as an implicit argument to another method that is called.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              23/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>This is the case with most higher-kinded types in Cats, for example <a href="https://github.com/typelevel/cats/blob/master/core/src/main/scala/cats/syntax/foldable.scala">here</a>:</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">FoldableSyntax</span> <span class="o">{</span>
  <span class="k">implicit</span> <span class="k">def</span> <span class="n">catsSyntaxNestedFoldable</span>
    <span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span><span class="kt">:</span> <span class="kt">Foldable</span>, <span class="kt">G</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span><span class="o">]</span>
    <span class="o">(</span><span class="n">fga</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">G</span><span class="o">[</span><span class="kt">A</span><span class="o">]])</span><span class="k">:</span> <span class="kt">NestedFoldableOps</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">G</span>, <span class="kt">A</span><span class="o">]</span> <span class="k">=</span>
      <span class="k">new</span> <span class="nc">NestedFoldableOps</span><span class="o">[</span><span class="kt">F</span>, <span class="kt">G</span>, <span class="kt">A</span><span class="o">](</span><span class="n">fga</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              24/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Earlier I mentioned the <a href="http://www.haskellforall.com/2012/08/the-category-design-pattern.html">'catergory theory design pattern'</a>.</p>
<p><a href="https://en.wikipedia.org/wiki/Category_theory">Category theory</a> is a branch of mathematics that grew up around algebraic topology in the mid-20th century, but has been increasingly applied to areas of computer science, particularly type theory.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              25/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We can think of a category as a <em>generalized monoid</em>.</p>
<p>Observe that with a monoid <code>M</code>, we can view each element of the monoid as a function of type <code>M =&gt; M</code>. For example, in the <code>Int</code> monoid with addition, these elements are <code>(_ + 0)</code>, <code>(_ + 1)</code>, etc.</p>
<p>Then the composition of these functions is the operation of the monoid.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              26/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We can generalize this notion to consider not just the type <code>M</code>, but all types (<code>A</code>, <code>B</code>, <code>C</code>, etc.) and functions not just of type <code>M =&gt; M</code>, but <code>A =&gt; B</code> for any types <code>A</code> and <code>B</code>.</p>
<p>Then ordinary function composition is an associative operation, with an identity element which is the <code>identity</code> function that just returns its argument.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              27/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Monads</h1></header>
            
            
            <section><p><a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)">Monads</a> are one of the most common abstractions in Scala, and one that most Scala programmers are familiar with even if they don’t know the name.
<br />
<br />
We even have special syntax in Scala to support monads: for comprehensions.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              28/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Despite the ubiquity of the concept, Scala lacks a concrete type to encompass monads.
<br />
<br />
This is one of the many benefits of using Cats.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              29/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Formally, a monad for a type <code>M[A]</code> has:</p>
<ul>
<li>an operation <code>flatMap</code> with type <code>(M[A], A =&gt; M[B]) =&gt; M[B]</code></li>
<li>an operation <code>pure</code> with type <code>A =&gt; M[A]</code>.
<br />
<br /></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              30/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>pure</code> (often referred to as <code>unit</code> or <code>return</code>) abstracts over the constructor of our monad.
<br />
<br />
<code>flatMap</code> (often referred to as <code>bind</code> and given the infix notation <code>&gt;&gt;=</code>) chains structured computations together in a way that allows interference between the structure and computation layers.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              31/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>In Haskell, the monad typeclass is written as follows:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="kt">Applicative</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">Monad</span> <span class="n">m</span> <span class="kr">where</span>
    <span class="p">(</span><span class="o">&gt;&gt;=</span><span class="p">)</span>       <span class="ow">::</span> <span class="n">m</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span>
    <span class="n">return</span>      <span class="ow">::</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">a</span>
    <span class="n">return</span>      <span class="ow">=</span> <span class="n">pure</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              32/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Most of the type classes we consider in this class are monadic: <code>List</code>, <code>Vector</code>, <code>Option</code>, <code>Xor</code>, <code>State</code>, <code>Future</code>, <code>Parser</code>, <code>Reader</code>, <code>Writer</code>, <code>IO</code> etc.</p>
<p>That means that these type classes all have the above operations, the so-called 'proper morphisms' of a monad,</p>
<p>They also include some 'non-proper morphisms' which give them additional capabilities.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              33/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>pure</code> and <code>flatMap</code> must obey three laws:</p>
<ol>
<li>Left identity: <code>pure(a) flatMap f == f(a)</code></li>
<li>Right identity: <code>m flatMap pure == m</code></li>
<li>Associativity: <code>(m flatMap f) flatMap g == m flatMap (a=&gt;f(a) flatMap g)</code></li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              34/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Exercise</h1></header>
            
            
            <section><p>A monad is also a functor. Given implementations of <code>flatMap</code> and <code>pure</code>, write an implementation of <code>map</code>:</p>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.language.higherKinds</span>
<span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">value</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span>
  <span class="o">(</span><span class="n">func</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">F</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="k">def</span> <span class="n">pure</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span><span class="o">](</span><span class="n">value</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">value</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span>
  <span class="o">(</span><span class="n">func</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
</pre></div>

<p>This factorization demonstrates the inherent lack of interference between the structure and computation layers in <code>map</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              35/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>There are three ways to define a monad in terms of combinations of primitive combinators. The one we've seen so far uses <code>unit</code> and <code>flatMap</code>.
<br />
<br />
A second combination is <code>unit</code>, <code>map</code>, and <code>join</code>, where <code>join</code> has the following type signature:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">join</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">mma</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">]])</span><span class="k">:</span> <span class="kt">F</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
</pre></div>

<p>Implement <code>join</code> in terms of <code>unit</code>, <code>map</code>, and/or <code>flatMap</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              36/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>We can also state the monad laws in terms of <code>pure</code>, <code>join</code>, and <code>map</code>:</p>
<ol>
<li>Left identity: <code>join(pure(m)) == m</code>     </li>
<li>Right identity: <code>join(map(m)(pure)) == m</code></li>
<li>Associativity: <code>join(join(m)) == join(map(m)(join))</code></li>
</ol>
<p>As an aside, the <a href="https://en.wikipedia.org/wiki/Monad_(category_theory)">definition of a monad</a> used in category theory is stated this way.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              37/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>That is, if we have a value <code>x</code> of type <code>M[M[M[A]]]</code>, we can <code>join</code> twice to get <code>M[A]</code>, or we can <code>map</code> <code>join</code> over the outer <code>M</code> and then <code>join</code> the result of that.</p>
<p>This is saying that in "flattening" <code>M[M[M[A]]]</code> to <code>M[A]</code>, it should not matter whether we first join the two "inner" <code>M</code>s or the two "outer" <code>M</code>s.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              38/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>This is easy to see with the <code>List</code> monad. If we have a <code>List</code> of <code>List</code>s of <code>List</code>s, like this...</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">x</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]]]</span> <span class="k">=</span>
  <span class="nc">List</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">)),</span> <span class="nc">List</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">),</span> <span class="nc">List</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">)))</span>
</pre></div>

<p>It should not matter whether we flatten the inner lists or the outer lists first:</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              39/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">y1</span> <span class="k">=</span> <span class="n">x</span><span class="o">.</span><span class="n">flatten</span>
<span class="c1">//y1 List(List(1, 2), List(3, 4), List(5, 6), List(7, 8))</span>
<span class="k">val</span> <span class="n">y2</span> <span class="k">=</span> <span class="n">x</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">flatten</span><span class="o">)</span>
<span class="c1">//y2 List(List(1, 2, 3, 4), List(5, 6, 7, 8))</span>
<span class="n">y1</span><span class="o">.</span><span class="n">flatten</span>
<span class="c1">//res0 = List(1, 2, 3, 4, 5, 6, 7, 8)</span>
<span class="n">y2</span><span class="o">.</span><span class="n">flatten</span>
<span class="c1">//res1 = List(1, 2, 3, 4, 5, 6, 7, 8)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              40/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>This is analagous to the monoid associativity law.</p>
<p>In the expression <code>((1 + 2) + (3 + 4)) + ((5 + 6) + (7 + 8))</code>, it doesn't matter whether we remove the inner brackets first to get <code>(1 + 2 + 3 + 4) + (5 + 6 + 7 + 8)</code> or the outer brackets first to get <code>(1 + 2) + (3 + 4) + (5 + 6) + (7 + 8)</code>.
<br />
<br />
In both cases we end up with <code>36</code>. The reason it doesn't matter is that <code>+</code> is <em>associative</em>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              41/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Interestingly, a monad itself is a certain kind of monoid.
<br />
<br />
Think of a type like <code>M[M[_]] =&gt; M</code> or <code>M² =&gt; M</code> as <code>(M, M) =&gt; M</code>  (taking 2 <code>M</code>s or the product of <code>M</code> with itself), and <code>1 =&gt; M</code> as <code>M</code> (where <code>1</code> is the <code>Unit</code> type).</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              42/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Then we can think of a type like <code>M[M[A]] =&gt; M[A]</code> as <code>M²[A] =&gt; M[A]</code> or just <code>M² ~&gt; M</code> (where <code>~&gt;</code> denotes a <a href="http://en.wikipedia.org/wiki/Natural_transformation">natural transformation</a>).</p>
<p>Similarly, <code>A =&gt; M[A]</code> is analagous to <code>1[A] =&gt; M[A]</code> (where <code>1</code> is the identity functor) or just <code>1 ~&gt; M</code>:
<br />
<br />
<br />
<br />
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;}
.tg .tg-9hbo{font-weight:bold;vertical-align:top}
.tg .tg-yw4l{vertical-align:top}
</style>
<table class="tg">
 <tr>
   <th class="tg-9hbo"></th>
   <th class="tg-9hbo">zero/unit</th>
   <th class="tg-9hbo">op/join</th>
 </tr>
 <tr>
   <td class="tg-9hbo">Monoid[M]</td>
   <td class="tg-yw4l">1 =&gt; M </th>
   <td class="tg-yw4l">M² =&gt; M</th>
 </tr>
 <tr>
   <td class="tg-9hbo">Monad[M]</td>
   <td class="tg-yw4l">1 ~&gt; M</th> <br />
   <td class="tg-yw4l">M² ~&gt; M</th>
 </tr>
</table></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              43/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>The real difference is that <code>Monoid[M]</code> is operating in a category where the objects are Scala types and the arrows are Scala endofunctions, and <code>Monad[M]</code> is operating in a category where the objects are Scala endofunctors and the arrows are natural transformations.</p>
<p>In other words, a monad is a monoid in the category of endofunctors.
<br />
<br />
See this <a href="http://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem">StackOverflow question</a> and <a href="http://apocalisp.wordpress.com/2010/07/21/more-on-monoids-and-monads/">Rúnar's article, "More on monoids and monads"</a> for more information.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              44/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Each monad instance we write means something totally different, but the monad laws make similar assertions.</p>
<p>For example we might write a <code>Monad[Future]</code> to constrain the behavior of concurrent processes.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              45/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>In this case the monad laws would force <code>map</code> to extend a running process by giving its continuation.</p>
<p>The <code>unit</code> and <code>join</code> functions with the monad laws would say that we can arbitrarily fork subexpressions of a program, and arbitrarily <code>join</code> with forked processes, and that the order in which we <code>fork</code> and <code>join</code> doesn’t matter to the result of the program.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              46/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Map functions are obvious candidates for essential parts of a usable library for functional programming.
<br />
<br />
This is a low-order abstraction—it eliminates concrete loops.
<br />
<br />
When we note a commonality in patterns and define an abstraction over that commonality, we move “one order up”.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              47/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Modern general-purpose functional libraries such as Cats have much more than a bunch of map functions, and we will soon find ourselves abstracting over many other, more complex patterns: error-handling (<code>Either</code>), logging (<code>Writer</code>), dependencies (<code>Reader</code>), concurrency (<code>Future</code>), state (<code>State</code>), etc.
<br />
<br />
Onward and upward!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              48/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Homework</h1></header>
            
            
            <section><p>Finish reading Chapter 11 in <em>Functional Programming in Scala</em>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              49/50
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture2.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Links</h1></header>
            
            
            <section><ul>
<li><a href="http://underscore.io/books/advanced-scala/">Advanced Scala with Cats</a></li>
<li><a href="http://typelevel.org/blog/2016/08/21/hkts-moving-forward.html">Higher-Kinded Types</a></li>
<li><a href="http://www.haskell.org/haskellwiki/Typeclassopedia">Typeclassopedia</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture2.md">lecture2.md</a>
            </aside>
            
            <aside class="page_number">
              50/50
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Lecture 2: Higher-Kinded Types</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">-</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">-</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">-</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">-</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">-</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">-</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">-</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">-</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">-</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">-</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">-</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">-</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">-</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">-</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">-</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">-</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Context Bounds</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">-</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Application: Insertion Sort</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">-</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">-</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">-</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">-</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">-</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Monads</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">-</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">-</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">-</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">-</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">-</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Exercise</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">-</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">-</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">-</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">-</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">-</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">-</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">-</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">-</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">-</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">-</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">-</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">-</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">-</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">Homework</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
      <tr id="toc-row-50">
        <th><a href="#slide50">Links</a></th>
        <td><a href="#slide50">50</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>