<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lecture 4: Combinators</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body style="!important;">
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Lecture 4: Combinators</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              1/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Guy Steele</h1></header>
            
            
            <section><p><img alt="" src="images/lecture4/guy_steele.jpg" /></p>
<p>"A language design can no longer be a thing. It must be a pattern – a pattern for growth – a
pattern for growing the pattern for defining the patterns that programmers can
use for their real work and their main goal."</p>
<ul>
<li><a href="http://dl.acm.org/citation.cfm?id=346922">Growing a Language</a>, 1998 ACM Conference on Object-Oriented Programming</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              2/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Functional Combinators</h1></header>
            
            
            <section><h2>on a "Container"</h2></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              3/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>map</h1></header>
            
            
            <section><p>Evaluates a function over each element in the list, returning a list with the same number of elements.</p>
<pre><code>scala&gt; numbers.map((i: Int) =&gt; i * 2)
res0: List[Int] = List(2, 4, 6, 8)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              4/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>foreach</h1></header>
            
            
            <section><p><code>foreach</code> is like <code>map</code> but returns nothing. <code>foreach</code> is intended for side-effects only.</p>
<pre><code>scala&gt; numbers.foreach((i: Int) =&gt; i * 2)
scala&gt; val doubled = numbers.foreach((i: Int) =&gt; i * 2)
doubled: Unit = ()
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              5/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>filter</h1></header>
            
            
            <section><p>removes any elements where the function you pass in evaluates to false.</p>
<pre><code>scala&gt; numbers.filter((i: Int) =&gt; i % 2 == 0)
res0: List[Int] = List(2, 4)
scala&gt; def isEven(i: Int): Boolean = i % 2 == 0
isEven: (i: Int)Boolean
scala&gt; numbers.filter(isEven _)
res2: List[Int] = List(2, 4)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              6/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>partition</h1></header>
            
            
            <section><p><code>partition</code> splits a list based on where it falls with respect to the predicate function.</p>
<pre><code>scala&gt; val numbers = List(1, 2, 3, 4, 5, 6)
scala&gt; numbers.partition(_ % 2 == 0)
res0: (List[Int], List[Int]) = 
  (List(2, 4, 6),List(1, 3, 5))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              7/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>exists</h1></header>
            
            
            <section><p><code>exists</code> determines whether there exists an element satisfying the predicate function.</p>
<pre><code>scala&gt; List(1,2,3) exists (_%2 ==0)
res69: Boolean = true
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              8/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>dropWhile</h1></header>
            
            
            <section><p><code>dropWhile</code> removes the first elements that match a predicate function.</p>
<pre><code>scala&gt; numbers.dropWhile(_ % 2 != 0)
res0: List[Int] = List(2, 3, 4, 5, 6)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              9/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>foldLeft</h1></header>
            
            
            <section><p>0 is the starting value (Remember that numbers is a <code>List[Int]</code>), and <code>m</code> acts as an accumulator.</p>
<pre><code>scala&gt; numbers.foldLeft(0) {
     |   (m: Int, n: Int) =&gt;
     |   println("m: " + m + " n: " + n); m + n
     | }
m: 0 n: 1
m: 1 n: 2
m: 3 n: 3
m: 6 n: 4
m: 10 n: 5
m: 15 n: 6
res0: Int = 21
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              10/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>foldRight</h1></header>
            
            
            <section><p>runs in the opposite direction as <code>foldLeft</code>. Not tail-recursive.</p>
<pre><code>scala&gt; numbers.foldRight(0) {
     |   (m: Int, n: Int) =&gt;
     |   println("m: " + m + " n: " + n); m + n
     | }  
m: 6 n: 0
m: 5 n: 6
m: 4 n: 11
m: 3 n: 15
m: 2 n: 18
m: 1 n: 20
res0: Int = 21
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              11/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>groupBy</h1></header>
            
            
            <section><p><code>groupBy</code> is another frequently used combinator groups the elements of a collection according to the range of a grouping function.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">groupBy</span> <span class="o">[</span><span class="kt">K</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">)</span> <span class="o">⇒</span> <span class="n">K</span><span class="o">)</span><span class="k">:</span> 
  <span class="kt">Map</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">Traversable</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              12/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val cats = 
  List("Tiger", "Lion", "Puma", "Leopard",
       "Jaguar", "Cheetah", "Bobcat")
cats: List[String] = 
  List(Tiger, Lion, Puma, Leopard, 
       Jaguar, Cheetah, Bobcat)

scala&gt; cats.groupBy(_.length)
res0: Map[Int,List[String]] = 
  Map(5 -&gt; List(Tiger),
      4 -&gt; List(Lion, Puma),
      7 -&gt; List(Leopard, Cheetah),
      6 -&gt; List(Jaguar, Bobcat))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              13/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>flatten</h1></header>
            
            
            <section><p><code>flatten</code> collapses one level of nested structure.</p>
<pre><code>scala&gt; List(List(1, 2), List(3, 4)).flatten
res0: List[Int] = List(1, 2, 3, 4)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              14/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>flatMap</h1></header>
            
            
            <section><p><code>flatMap</code> is a frequently used combinator that combines mapping and flattening.</p>
<pre><code>scala&gt; val nestedNumbers = 
  List(List(1, 2), List(3, 4))
nestedNumbers: List[List[Int]] = 
  List(List(1, 2), List(3, 4))
scala&gt; nestedNumbers.flatMap(x =&gt; x.map(_ * 2))
res0: List[Int] = List(2, 4, 6, 8)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              15/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p><code>flatMap</code> is frequently available in nontraditional collections such as <code>Future</code> and <code>Option</code>.</p>
<p>For a <code>Container[A]</code>, its signature is:</p>
<div class="highlight"><pre><span></span><span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Container</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Container</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              16/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>For example, to get all permutations of two character strings that aren't the same character repeated twice:</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">chars</span> <span class="k">=</span> <span class="sc">&#39;a&#39;</span> <span class="n">to</span> <span class="sc">&#39;z&#39;</span>
<span class="k">val</span> <span class="n">perms</span> <span class="k">=</span> <span class="n">chars</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="n">a</span> <span class="k">=&gt;</span>
  <span class="n">chars</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="n">b</span> <span class="k">=&gt;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="o">)</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;%c%c&quot;</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">))</span>
    <span class="k">else</span> <span class="nc">Seq</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              17/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>This is equivalent to the more concise for-comprehension (which is — roughly — syntactical sugar for the above):</p>
<div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">perms</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="n">a</span> <span class="k">&lt;-</span> <span class="n">chars</span>
  <span class="n">b</span> <span class="k">&lt;-</span> <span class="n">chars</span>
  <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span>
<span class="o">}</span> <span class="k">yield</span> <span class="s">&quot;%c%c&quot;</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              18/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Scala Style</h1></header>
            
            
            <section><p>Functional programming encourages pipelining transformations of an immutable collection to shape it to its desired result.</p>
<p>This often leads to very succinct solutions, but can also be confusing to the reader.</p>
<p>These transformations occur inside a "container."</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              19/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">votes</span> <span class="k">=</span> 
  <span class="nc">Seq</span><span class="o">((</span><span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="s">&quot;b&quot;</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="o">(</span><span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="mi">10</span><span class="o">),</span>
      <span class="o">(</span><span class="s">&quot;b&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="s">&quot;c&quot;</span><span class="o">,</span> <span class="mi">10</span><span class="o">))</span>
<span class="k">val</span> <span class="n">orderedVotes</span> <span class="k">=</span> <span class="n">votes</span>
  <span class="o">.</span><span class="n">groupBy</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">_1</span><span class="o">)</span>
  <span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">which</span><span class="o">,</span> <span class="n">counts</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="o">(</span><span class="n">which</span><span class="o">,</span> <span class="n">counts</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">0</span><span class="o">)(</span><span class="k">_</span> <span class="o">+</span> <span class="k">_</span><span class="o">.</span><span class="n">_2</span><span class="o">))</span>
  <span class="o">}.</span><span class="n">toSeq</span>
  <span class="o">.</span><span class="n">sortBy</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">_2</span><span class="o">)</span>
  <span class="o">.</span><span class="n">reverse</span>
</pre></div>

<p class="notes">this is both succinct and correct, but nearly every reader will have a difficult time recovering the original intent of the author. A strategy that often serves to clarify is to name intermediate results and parameters:</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              20/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">votesByLang</span> <span class="k">=</span> 
  <span class="n">votes</span> <span class="n">groupBy</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">lang</span><span class="o">,</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">lang</span> <span class="o">}</span>
<span class="k">val</span> <span class="n">sumByLang</span> <span class="k">=</span> 
  <span class="n">votesByLang</span> <span class="n">map</span> <span class="o">{</span> 
    <span class="k">case</span> <span class="o">(</span><span class="n">lang</span><span class="o">,</span> <span class="n">counts</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="k">val</span> <span class="n">countsOnly</span> <span class="k">=</span> <span class="n">counts</span> <span class="n">map</span> <span class="o">{</span> 
        <span class="k">case</span> <span class="o">(</span><span class="k">_</span><span class="o">,</span> <span class="n">count</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">count</span> 
      <span class="o">}</span>
      <span class="o">(</span><span class="n">lang</span><span class="o">,</span> <span class="n">countsOnly</span><span class="o">.</span><span class="n">sum</span><span class="o">)</span>
  <span class="o">}</span>
<span class="k">val</span> <span class="n">orderedVotes</span> <span class="k">=</span> <span class="n">sumByLang</span><span class="o">.</span><span class="n">toSeq</span>
  <span class="o">.</span><span class="n">sortBy</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="k">_</span><span class="o">,</span> <span class="n">count</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">count</span> <span class="o">}</span>
  <span class="o">.</span><span class="n">reverse</span>
</pre></div>

<p class="notes">the code is nearly as succinct, but much more clearly expresses both the transformations take place (by naming intermediate values), and the structure of the data being operated on (by naming parameters). If you worry about namespace pollution with this style, group expressions with {}</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              21/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Syntax seen in the two slides prior</p>
<div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">which</span><span class="o">,</span> <span class="n">counts</span><span class="o">)</span> <span class="k">=&gt;</span> 
    <span class="o">...</span>
<span class="o">}</span>
<span class="o">...</span>
</pre></div>

<p>This inline <code>case</code> statement, with no preceding <code>match</code>, is syntactic sugar for <code>PartialFunction</code>.</p>
<p><code>PartialFunction[A,B]</code> is a subtype of <code>A =&gt; B</code>, so <code>PartialFunction[A,B]</code> can be given as an argument to <code>map</code>, which expects <code>A =&gt; B</code>.</p>
<blockquote>
<p>A partial function of type PartialFunction[A, B] is a unary function where the domain does not necessarily include all values of type <code>A</code>. 
  -- <a href="http://www.scala-lang.org/api/current/#scala.PartialFunction">Scala API</a></p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              22/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>PartialFunction[A,B]</code> will throw a runtime exception if <code>A</code> is not in its domain.</p>
<pre><code>scala&gt; val capitalAscii: 
  PartialFunction[Int, Char] =
  { case (i: Int) if i&gt;=65 &amp;&amp; i&lt;=90 =&gt; i.toChar }
capitalAscii: PartialFunction[Int,Char] = 
  &lt;function1&gt;

scala&gt; capitalAscii(66)
res2: Char = B

scala&gt; capitalAscii(100)
scala.MatchError: 100 (of class java.lang.Integer)
  at scala.PartialFunction$$anon$1...
  at scala.PartialFunction$$anon$1...
  ...
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              23/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Option</h1></header>
            
            
            <section><p><code>Option</code> is a <em>container</em> that may or may not hold something.</p>
<p><code>Option</code> containers can be <em>chained</em> together, with <code>flatMap</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              24/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p><code>Option</code> itself is generic and has two subclasses: Some[T] or None</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="c1">//base trait</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Some</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">get</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> 
  <span class="k">extends</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">None</span> 
  <span class="k">extends</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span>
</pre></div>

<p><code>case class</code> and <code>case object</code> provide built-in constructors and pattern-matching.
<code>class</code> and <code>object</code> do not.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              25/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p><code>Option</code>s are like <code>List</code>s with at most a single element.</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="c1">//base trait</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Cons</span><span class="o">[</span><span class="kt">+A</span><span class="o">](</span><span class="n">head</span><span class="k">:</span> <span class="kt">A</span><span class="o">,</span> <span class="n">tail</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> 
  <span class="k">extends</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Nil</span> 
  <span class="k">extends</span> <span class="nc">List</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              26/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Failure is an <code>Option</code></h1></header>
            
            
            <section><p><code>Option</code> tells you that a function might not return what you’re asking for.</p>
<pre><code>scala&gt; val numbers = Map("one" -&gt; 1, "two" -&gt; 2)
numbers: Map(one -&gt; 1, two -&gt; 2)
scala&gt; numbers.get("two")
res0: Option[Int] = Some(2)
scala&gt; numbers.get("three")
res1: Option[Int] = None
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              27/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>"Container" pattern</h1></header>
            
            
            <section><p><code>Option</code> follows this pattern, along with other types this class will encounter.</p>
<p>Containers have many methods.  Some of these methods fulfill one of these two purposes:</p>
<ul>
<li>combinators for entering the Container</li>
<li>combinators for exiting the Container -- safely</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              28/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Combinators for entering the Container</p>
<ul>
<li><code>unit</code> -- <code>def unit[A](a: A): Option[A]</code></li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.Option$@apply[A](x:A):Option[A]"><code>apply</code></a> -- equivalent to <code>unit</code></li>
<li><code>apply</code> provides syntactic sugar.  <code>Foo.apply(123)</code> and <code>Foo(123)</code> are equivalent.</li>
<li><code>lift</code> -- <code>def lift[A,B](f: A =&gt; B): Option[A] =&gt; Option[B]</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              29/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Combinators for exiting the Container -- safely</p>
<ul>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.Option@fold[B](ifEmpty:=%3EB)(f:A=%3EB):B"><code>fold</code></a> -- <code>def fold[A,B](ifEmpty: =&gt; B)(f: (A) =&gt; B): B</code></li>
<li><code>foldLeft</code></li>
<li><code>foldRight</code></li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.Option@getOrElse[B%3E:A]%28default:=%3EB%29:B"><code>getOrElse</code></a> -- Given <code>Option[A]</code>, <code>getOrElse(alternativeA: A): A</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              30/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>C, Java, and Python-style Error Handling (in chronological order)</h1></header>
            
            
            <section><p>...</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              31/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Application: Computing a mean</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">mean</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">)</span> <span class="nc">None</span>
  <span class="k">else</span> <span class="nc">Some</span><span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">xs</span><span class="o">.</span><span class="n">length</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              32/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            
            <section><p>The basic interface for Option consists of three methods:</p>
<div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getOrElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span>
  <span class="k">def</span> <span class="n">orElse</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">ob</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>

<p>Next lecture will explain the necessity of the lower type bound generic <code>B</code> in the <code>getOrElse</code> and <code>orElse</code> combinators.</p>
<p class="notes">Note the parallels between map, flatMap, getOrElse and orElse</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              33/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">getOrElse</span><span class="o">[</span><span class="kt">B</span><span class="k">&gt;:</span><span class="kt">A</span><span class="o">](</span><span class="n">default</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=</span> 
  <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="n">default</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">a</span>
  <span class="o">}</span>

<span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="nc">None</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">))</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              34/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Maps on Options</h1></header>
            
            
            <section><pre><code>scala&gt; val a = Some(3)
a: Some[Int] = Some(3)
scala&gt; a map (_+2)
res8: Option[Int] = Some(5)
</code></pre>
<p>Making the wildcard function (<code>_ + 2</code>) explicit,</p>
<pre><code>a.map { (i: Int) =&gt; i+2 }
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              35/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val b: Option[Int] = None
b: Option[Int] = None
scala&gt; b map (_+2)
res47: Option[Int] = None
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              36/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1><code>flatMap</code> for <code>Option</code></h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">flatMap</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">this</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="nc">None</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              37/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Implement <code>flatMap</code> using the other 3 core methods <code>map</code>, <code>orElse</code>, &amp; <code>getOrElse</code>.</p>
<p>Note which combinators are implemented using other combinators.  The combinators which are implemented "from scratch," we will call "core" or "primitive."  This has implications for the Container pattern.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              38/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">flatMap1</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">map</span><span class="o">(</span><span class="n">f</span><span class="o">)</span> <span class="n">getOrElse</span> <span class="nc">None</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              39/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Reduction of for loops</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">{</span>
  <span class="n">i</span> <span class="k">&lt;-</span> <span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span><span class="n">i</span> <span class="k">=&gt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              40/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">{</span>
  <span class="n">i</span> <span class="k">&lt;-</span> <span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
  <span class="n">j</span> <span class="k">&lt;-</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span>

<span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="n">flatMap</span> <span class="o">{</span>
  <span class="n">i</span> <span class="k">=&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span>
    <span class="n">j</span> <span class="k">=&gt;</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              41/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><code>flatMap</code> is similarly useful when dealing with Options — it will collapse chains of options down to one.</p>
<p>We will talk much more in depth about this pattern when we get to Monads.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              42/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>'Looping' over Options</h1></header>
            
            
            <section><p>Given <code>def foo(x: Int, y: Int): Int = x+y</code></p>
<pre><code>scala&gt;  val a = Some(3); val b = Some(4)
a: Some[Int] = Some(3)
b: Some[Int] = Some(4)
scala&gt;   for {
     |     x &lt;- a
     |     y &lt;- b
     |   } yield { foo(x, y) }
res2: Option[Int] = Some(7)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              43/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Equivalently</p>
<p>Given <code>def foo(x: Int, y: Int): Int = x+y</code></p>
<pre><code>scala&gt;  val opA = Some(3); val opB = Some(4)
opA: Some[Int] = Some(3)
opB: Some[Int] = Some(4)

scala&gt; opA.flatMap { a =&gt;
            opB.map { b =&gt; foo(a,b) }
        }

res2: Option[Int] = Some(7)
</code></pre>
<p>Why use <code>map</code> on <code>opB</code>, rather than <code>flatMap</code>?  What does this indicate about for-comprehensions?</p>
<p><a href="http://docs.scala-lang.org/tutorials/FAQ/yield.html">for-comp syntactic sugar</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              44/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>A different <code>foo</code></p>
<p><code>def foo(x: Int, y: Int): Option[Int] = if(x&lt;0) Some(x+y) else None</code></p>
<pre><code>scala&gt;  val opA = Some(3); val opB = Some(4)
opA: Some[Int] = Some(3)
opB: Some[Int] = Some(4)

scala&gt; opA.flatMap { a =&gt;
            opB.flatMap { b =&gt; foo(a,b) }
        }

res2: Option[Int] = None
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              45/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; val c = None
c: None.type = None
scala&gt;   for {
     |     x &lt;- a
     |     y &lt;- c
     |   } yield foo(x, y)
res3: Option[Int] = None
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              46/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Provided a function <code>mean</code>,</p>
<div class="highlight"><pre><span></span><span class="n">mean</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>implement a <code>variance</code> function with the following signature:</p>
<div class="highlight"><pre><span></span><span class="n">variance</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span>
</pre></div>

<p>It is an exercise in using <code>flatMap</code></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              47/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Concise solution</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">variance</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">mean</span><span class="o">(</span><span class="n">xs</span><span class="o">)</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="n">m</span> <span class="k">=&gt;</span> 
    <span class="n">mean</span><span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">m</span><span class="o">,</span> <span class="mi">2</span><span class="o">)))</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              48/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Expanded solution</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nc">_variance</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
<span class="k">if</span> <span class="o">(</span><span class="n">xs</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">)</span> <span class="nc">None</span>
<span class="k">else</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">opMean</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="n">mean</span><span class="o">(</span><span class="n">xs</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">opVariance</span> <span class="k">=</span> <span class="n">opMean</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span> <span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="k">=&gt;</span> 
    <span class="k">val</span> <span class="n">subMSquared</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="n">xs</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">s</span> <span class="k">=&gt;</span>
      <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="o">(</span><span class="n">s</span><span class="o">-</span><span class="n">m</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> 
    <span class="o">}</span>
    <span class="n">mean</span><span class="o">(</span><span class="n">subMSquared</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span>
  <span class="o">}</span>
  <span class="n">opVariance</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              49/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Lifting Functions</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">lift</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">_</span> <span class="n">map</span> <span class="n">f</span>
</pre></div>

<p>The wildcard above is an anonymous function</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">lift</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span>
  <span class="o">(</span><span class="n">opA</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=&gt;</span> <span class="n">opA</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">f</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              50/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; lift(math.abs)
res48: Option[Int] =&gt; Option[Int] = &lt;function1&gt;
scala&gt; lift(math.pow)
&lt;console&gt;:38: error: type mismatch;
 found   : (Double, Double) =&gt; Double
 required: ? =&gt; ?
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              51/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Implement a <code>map2</code> function with the following signature:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map2</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              52/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map2</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
    <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">a</span> <span class="n">flatMap</span> <span class="o">(</span><span class="n">aa</span> <span class="k">=&gt;</span> <span class="n">b</span> <span class="n">map</span> <span class="o">(</span><span class="n">bb</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">(</span><span class="n">aa</span><span class="o">,</span> <span class="n">bb</span><span class="o">)))</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              53/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>this pattern may look familiar</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map2</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">a</span> <span class="n">flatMap</span> <span class="o">{</span>
    <span class="n">i</span> <span class="k">=&gt;</span> <span class="n">b</span> <span class="n">map</span> <span class="o">{</span>
      <span class="n">j</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              54/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">{</span>
  <span class="n">i</span> <span class="k">&lt;-</span> <span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
  <span class="n">j</span> <span class="k">&lt;-</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span>

<span class="nc">List</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="n">flatMap</span> <span class="o">{</span>
  <span class="n">i</span> <span class="k">=&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span>
    <span class="n">j</span> <span class="k">=&gt;</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              55/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>We could even implement <code>map2</code> with a for-comprehension:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map2</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span>
  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">C</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">]</span> <span class="k">=</span>   
  <span class="k">for</span> <span class="o">{</span>
    <span class="n">i</span> <span class="k">&lt;-</span> <span class="n">a</span>
    <span class="n">j</span> <span class="k">&lt;-</span> <span class="n">b</span>
  <span class="o">}</span> <span class="k">yield</span> <span class="n">f</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              56/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Implement a <code>map3</code> function, using <code>flatMap</code> or a for-comprehension:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">map3</span><span class="o">[</span><span class="kt">A</span>,<span class="kt">B</span>,<span class="kt">C</span>,<span class="kt">D</span><span class="o">](</span><span class="n">opA</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">opB</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">],</span> <span class="n">opC</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">C</span><span class="o">])</span>
  <span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">,</span> <span class="kt">B</span><span class="o">,</span> <span class="n">C</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">D</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">D</span><span class="o">]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              57/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Try</h1></header>
            
            
            <section><p>Common pattern in <em>FP in Scala</em>: wrapping a side-effecting API or function in a purely functional data structure.</p>
<p>Let's wrap a function that may throw an error in an <code>Option</code>.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nc">Try</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">try</span> <span class="o">{</span> <span class="nc">Some</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">}</span>
  <span class="k">catch</span> <span class="o">{</span> <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">Exception</span> <span class="o">=&gt;</span> <span class="nc">None</span> <span class="o">}</span>
</pre></div>

<p>We use a try-catch clause from Java.  The <code>catch</code> syntax is slightly different in Scala.</p>
<p>The <code>None</code> returned is not informative about the exception thrown.  Next lecture's type <code>Either</code> fixes this.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              58/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p><code>=&gt;</code> in a function argument means the argument is lazy.  <code>=&gt;</code> does not memoize.
If <code>a</code> were evaluated eagerly, an exception thrown in its evaluation would be outside the try-catch clause.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nc">Try</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">try</span> <span class="o">{</span> <span class="nc">Some</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">}</span>
  <span class="k">catch</span> <span class="o">{</span> <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">Exception</span> <span class="o">=&gt;</span> <span class="nc">None</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              59/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Think of lazy argument <code>a: =&gt; A</code> as a function with no input: <code>() =&gt; A</code>.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nc">Try</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">lazyA</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> 
  <span class="k">try</span> <span class="o">{</span> <span class="nc">Some</span><span class="o">(</span> <span class="n">lazyA</span><span class="o">()</span> <span class="o">)</span> <span class="o">}</span>
  <span class="k">catch</span> <span class="o">{</span> <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">Exception</span> <span class="o">=&gt;</span> <span class="nc">None</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              60/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1><code>sequence</code> and <code>traverse</code></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              61/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">sequence</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Option</span><span class="o">[</span><span class="kt">A</span><span class="o">]])</span><span class="k">:</span> 
  <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              62/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><p>Can be implemented with <code>sequence</code></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">traverse</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> 
  <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              63/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre><code>scala&gt; def foo(x: Int) = 
  if (x==2) None else Some(x)
foo: (x: Int)Option[Int]

scala&gt; traverse(List(1,2,3))(foo)
res55: Option[List[Int]] = None
scala&gt; traverse(List(1,3,4))(foo)
res56: Option[List[Int]] = Some(List(1, 3, 4))
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              64/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Challenge Question</h1></header>
            
            
            <section><p>Implement <code>traverse</code> so that it traverses the list only once.</p>
<p>Use <code>sequence</code> to implement <code>traverse</code> more efficiently.  Of course, there cannot be a circular dependency.</p>
<p>This is exercise 4.5 in <em>FP in Scala</em>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              65/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="page_number">
              /70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">traverse1</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span>
  <span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]</span> <span class="k">=</span>
  <span class="n">a</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Nil</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">h</span> <span class="o">::</span> <span class="n">t</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">(</span><span class="n">h</span><span class="o">)</span> <span class="n">flatMap</span> <span class="o">{</span>
      <span class="n">x</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=&gt;</span> <span class="n">traverse</span><span class="o">(</span><span class="n">t</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span> <span class="n">xt</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xt</span> <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              66/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">traverse2</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span>
  <span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]</span> <span class="k">=</span>
  <span class="n">a</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Nil</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">h</span> <span class="o">::</span> <span class="n">t</span> <span class="k">=&gt;</span> <span class="n">traverse</span><span class="o">(</span><span class="n">t</span><span class="o">)(</span><span class="n">f</span><span class="o">)</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="n">xt</span> <span class="k">=&gt;</span>
      <span class="n">f</span><span class="o">(</span><span class="n">h</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span> <span class="n">x</span><span class="k">:</span> <span class="kt">B</span> <span class="o">=&gt;</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xt</span> <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              67/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">traverse3</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span>
  <span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]</span> <span class="k">=</span>
  <span class="n">a</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="k">=&gt;</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Nil</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">h</span> <span class="o">::</span> <span class="n">t</span> <span class="k">=&gt;</span> 
      <span class="n">map2</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">h</span><span class="o">),</span> <span class="n">traverse</span><span class="o">(</span><span class="n">t</span><span class="o">)(</span><span class="n">f</span><span class="o">))(</span><span class="k">_</span> <span class="o">::</span> <span class="k">_</span><span class="o">)</span>
  <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              68/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            
            <section><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">traverse_4</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">])(</span>
  <span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]</span> <span class="k">=</span>
    <span class="n">a</span><span class="o">.</span><span class="n">foldRight</span><span class="o">[</span><span class="kt">Option</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]]]</span> <span class="o">(</span><span class="nc">Some</span><span class="o">(</span><span class="nc">Nil</span><span class="o">))</span> <span class="o">{</span>
      <span class="o">(</span><span class="n">h</span><span class="o">,</span><span class="n">t</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">map2</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">h</span><span class="o">),</span><span class="n">t</span><span class="o">)(</span><span class="k">_</span> <span class="o">::</span> <span class="k">_</span><span class="o">)</span>
    <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              69/70
            </aside>

          </footer>
        </div>
      </div>
      
      <!-- slide source: lecture4.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p>Generally speaking, you know there is only one thing that can go wrong, use <code>Option</code> or its extension <code>Either</code>.
<br />
<br />
<br /></p>
<p>If you know there is multiple things that can go wrong, roll your own Trait.
<br />
<br />
<br />
Only use exceptions if you don't know what can go wrong.</p>
<p>Some exceptions we do not want to catch, like fatal exceptions.  These will be handled by the JVM.</p>
<p>The comparable types to <code>Option</code> in the <code>Scalaz</code> library encourage you not to catch fatal exceptions.</p>
<p>Our <em>uninformative</em> <code>Try</code> method justifies <code>Either</code>, which has a feature <code>Option</code> does not have.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>


          <footer>
            
            <aside class="source">
              Source: <a href="lecture4.md">lecture4.md</a>
            </aside>
            
            <aside class="page_number">
              70/70
            </aside>

          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Lecture 4: Combinators</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Guy Steele</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Functional Combinators</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">map</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">foreach</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">filter</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">partition</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">exists</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">dropWhile</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">foldLeft</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">foldRight</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">groupBy</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">-</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">flatten</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">flatMap</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">-</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">-</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">-</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Scala Style</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">-</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">-</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">-</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">-</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Option</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">-</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">-</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Failure is an <code>Option</code></a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">"Container" pattern</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">-</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">-</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">C, Java, and Python-style Error Handling (in chronological order)</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">Application: Computing a mean</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">-</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Maps on Options</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">-</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37"><code>flatMap</code> for <code>Option</code></a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">Challenge Question</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">-</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">Reduction of for loops</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">-</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">-</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">'Looping' over Options</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">-</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">-</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">-</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">Challenge Question</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">-</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">-</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
      <tr id="toc-row-50">
        <th><a href="#slide50">Lifting Functions</a></th>
        <td><a href="#slide50">50</a></td>
      </tr>
      
      
      <tr id="toc-row-51">
        <th><a href="#slide51">-</a></th>
        <td><a href="#slide51">51</a></td>
      </tr>
      
      
      <tr id="toc-row-52">
        <th><a href="#slide52">Challenge Question</a></th>
        <td><a href="#slide52">52</a></td>
      </tr>
      
      
      <tr id="toc-row-53">
        <th><a href="#slide53">-</a></th>
        <td><a href="#slide53">53</a></td>
      </tr>
      
      
      <tr id="toc-row-54">
        <th><a href="#slide54">this pattern may look familiar</a></th>
        <td><a href="#slide54">54</a></td>
      </tr>
      
      
      <tr id="toc-row-55">
        <th><a href="#slide55">-</a></th>
        <td><a href="#slide55">55</a></td>
      </tr>
      
      
      <tr id="toc-row-56">
        <th><a href="#slide56">-</a></th>
        <td><a href="#slide56">56</a></td>
      </tr>
      
      
      <tr id="toc-row-57">
        <th><a href="#slide57">Challenge Question</a></th>
        <td><a href="#slide57">57</a></td>
      </tr>
      
      
      <tr id="toc-row-58">
        <th><a href="#slide58">Try</a></th>
        <td><a href="#slide58">58</a></td>
      </tr>
      
      
      <tr id="toc-row-59">
        <th><a href="#slide59">-</a></th>
        <td><a href="#slide59">59</a></td>
      </tr>
      
      
      <tr id="toc-row-60">
        <th><a href="#slide60">-</a></th>
        <td><a href="#slide60">60</a></td>
      </tr>
      
      
      <tr id="toc-row-61">
        <th><a href="#slide61"><code>sequence</code> and <code>traverse</code></a></th>
        <td><a href="#slide61">61</a></td>
      </tr>
      
      
      <tr id="toc-row-62">
        <th><a href="#slide62">-</a></th>
        <td><a href="#slide62">62</a></td>
      </tr>
      
      
      <tr id="toc-row-63">
        <th><a href="#slide63">-</a></th>
        <td><a href="#slide63">63</a></td>
      </tr>
      
      
      <tr id="toc-row-64">
        <th><a href="#slide64">-</a></th>
        <td><a href="#slide64">64</a></td>
      </tr>
      
      
      <tr id="toc-row-65">
        <th><a href="#slide65">Challenge Question</a></th>
        <td><a href="#slide65">65</a></td>
      </tr>
      
      
      <tr id="toc-row-66">
        <th><a href="#slide66">-</a></th>
        <td><a href="#slide66">66</a></td>
      </tr>
      
      
      <tr id="toc-row-67">
        <th><a href="#slide67">-</a></th>
        <td><a href="#slide67">67</a></td>
      </tr>
      
      
      <tr id="toc-row-68">
        <th><a href="#slide68">-</a></th>
        <td><a href="#slide68">68</a></td>
      </tr>
      
      
      <tr id="toc-row-69">
        <th><a href="#slide69">-</a></th>
        <td><a href="#slide69">69</a></td>
      </tr>
      
      
      <tr id="toc-row-70">
        <th><a href="#slide70">-</a></th>
        <td><a href="#slide70">70</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>